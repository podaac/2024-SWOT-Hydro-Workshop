[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Data Access Workshop for NASA’s SWOT Satellite",
    "section": "",
    "text": "Welcome to the 2024 Data Access Workshop for NASA’s SWOT Satellite hosted by PO.DAAC!\nThe workshop will take place in person at the AGU Chapman: Remote Sensing of the Water Cycle Conference on Tuesday, February 13, 2024 from 9am-12:30pm in Honolulu, HI."
  },
  {
    "objectID": "index.html#welcome",
    "href": "index.html#welcome",
    "title": "Data Access Workshop for NASA’s SWOT Satellite",
    "section": "",
    "text": "Welcome to the 2024 Data Access Workshop for NASA’s SWOT Satellite hosted by PO.DAAC!\nThe workshop will take place in person at the AGU Chapman: Remote Sensing of the Water Cycle Conference on Tuesday, February 13, 2024 from 9am-12:30pm in Honolulu, HI."
  },
  {
    "objectID": "index.html#about",
    "href": "index.html#about",
    "title": "Data Access Workshop for NASA’s SWOT Satellite",
    "section": "About",
    "text": "About\n\nWorkshop Goals\n\nProvide an inclusive place to learn about and experience working with NASA’s SWOT Hydrology Data;\nProvide strategies and best practices for finding and accessing NASA Earthdata in the Cloud. Specifically, participants will learn how to access data from AWS S3 buckets and have a better understanding of the Python ecosystem used to analyze the data depending on size and data formats;\nBetter understand the needs of Earthdata data scientists by providing a post survey and engaging in discussions with workshop participants;\nPractice using popular open source tools and utilities.\n\n\n\nWorkshop Description\nThe Surface Water and Ocean Topography (SWOT) satellite, a joint NASA-CNES venture, provides unprecedented measurements of surface water extents and elevations for hydrologic science and applications. The observations are offered through a range of data products including river and lake vector data in shapefiles, and raster, pixel cloud, and pixel vector data in netCDF. The shapefile products will also contain estimates of river discharge and lake storage change. In this pre-meeting workshop, participants will be introduced to SWOT and the various ways to access and utilize its data products, including via cloud computing, local download, and data transformation tools. Participants will be able to utilize a provided cloud computing environment accessed via personal laptops, or their own laptop’s compute power to explore SWOT data using data recipes by PO.DAAC, NASA’s Physical Oceanography Data Active Archive Center. No prior cloud computing experience is necessary. We welcome all to come and see how SWOT data could augment existing workflows or initiate new, innovative science and applications! The data tutorials at the workshop will use Python, but no prior experience is needed.\n\n\nAdditional SWOT Resources\n\nPO.DAAC Cookbook: SWOT Chapter - additional tutorials & tips\nSWOT Community GitHub - more community contributions\nSWOT Product Description Documents - pdfs embedded in the table\nPO.DAAC SWOT mission page"
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "Data Access Workshop for NASA’s SWOT Satellite",
    "section": "Acknowledgements",
    "text": "Acknowledgements\nThis Workshop and its content has been developed by the PO.DAAC team at NASA’s Jet Propulsion Laboratory, California Institute of Technology."
  },
  {
    "objectID": "schedule.html",
    "href": "schedule.html",
    "title": "Schedule",
    "section": "",
    "text": "The Data Access Workshop for NASA’s SWOT Satellite will take place on Tuesday, February 13th from 9:00-12:30.\nNote, hands-on exercises will be executed from a Jupyter Lab instance in 2i2c. Click here to deploy the instance and simultaneously clone this GitHub repository to follow along with the tutorials. Please pass along your GitHub Username to get access."
  },
  {
    "objectID": "schedule.html#workshop-schedule",
    "href": "schedule.html#workshop-schedule",
    "title": "Schedule",
    "section": "Workshop Schedule",
    "text": "Workshop Schedule\n\nFebruary 13th, 2024\n\n\n\nTime, HST (UTC-10)\nEvent\n\n\n\n\n\n9:00 am\nWelcome / Ice Breaker\n\n\n\n9:15 am\nIntroduction to SWOT & PO.DAAC\n\n\n\n9:40 am\nEarthdata Search Walkthrough\n\n\n\n10:00 am\nBreak\n\n\n\n10:10 am\nData Access Tutorials\n\n\n\n11:10 am\nBreak\n\n\n\n11:25 am\nTransformation Tools\n\n\n\n11:45 am\nHydroweb.next Demo\n\n\n\n12:00 pm\nDiscussion & Feedback\n\n\n\n12:20 pm\nSummary & Closing"
  },
  {
    "objectID": "schedule.html#closing---close-out-your-jupyter-hub",
    "href": "schedule.html#closing---close-out-your-jupyter-hub",
    "title": "Schedule",
    "section": "Closing - Close out your Jupyter Hub!",
    "text": "Closing - Close out your Jupyter Hub!\n\nClose out your JupyterHub instance if you are finished for the day, following these instructions.\nYou will continue to have access to the 2i2c JupyterHub in AWS for two weeks following this Workshop. You may use that time on your own to continue work and learn more about migrating data access routines and science workflows to the cloud. This cloud compute environment is supported by the NASA Openscapes project.\n\n\nThank you!"
  },
  {
    "objectID": "slides.html",
    "href": "slides.html",
    "title": "Workshop Slides",
    "section": "",
    "text": "TODO: embed slides"
  },
  {
    "objectID": "slides.html#data-access-workshop-for-nasas-swot-satellite",
    "href": "slides.html#data-access-workshop-for-nasas-swot-satellite",
    "title": "Workshop Slides",
    "section": "",
    "text": "TODO: embed slides"
  },
  {
    "objectID": "prerequisites.html",
    "href": "prerequisites.html",
    "title": "Prerequisites",
    "section": "",
    "text": "An Earthdata Login account is required to access data, as well as discover restricted data, from the NASA Earthdata system. Thus, to access NASA data, you need Earthdata Login. Please visit https://urs.earthdata.nasa.gov to register and manage your Earthdata Login account. This account is free to create and only takes a moment to set up. Please remember your username and password!\n\n\n\nA GitHub account is required to gain access to the provided 2i2c cloud computing platform. Please visit https://github.com/join to register and create a free GitHub account. There was an opportunity to send in your GitHub username when you registered for the workshop, if you did not do so, please email cassandra.l.nickles@jpl.nasa.gov with your GitHub username and mention you are a participant for this workshop.\n\n\n\nParticipation in the exercises requires a laptop or tablet. Yes, a tablet works too! All participants will have access to a 2i2c Jupyter Lab instance running in AWS us-west 2."
  },
  {
    "objectID": "prerequisites.html#before-the-workshop-you-will-need-the-following",
    "href": "prerequisites.html#before-the-workshop-you-will-need-the-following",
    "title": "Prerequisites",
    "section": "",
    "text": "An Earthdata Login account is required to access data, as well as discover restricted data, from the NASA Earthdata system. Thus, to access NASA data, you need Earthdata Login. Please visit https://urs.earthdata.nasa.gov to register and manage your Earthdata Login account. This account is free to create and only takes a moment to set up. Please remember your username and password!\n\n\n\nA GitHub account is required to gain access to the provided 2i2c cloud computing platform. Please visit https://github.com/join to register and create a free GitHub account. There was an opportunity to send in your GitHub username when you registered for the workshop, if you did not do so, please email cassandra.l.nickles@jpl.nasa.gov with your GitHub username and mention you are a participant for this workshop.\n\n\n\nParticipation in the exercises requires a laptop or tablet. Yes, a tablet works too! All participants will have access to a 2i2c Jupyter Lab instance running in AWS us-west 2."
  },
  {
    "objectID": "Tutorials/SWOTHR_s3Access_real_data_v11.html",
    "href": "Tutorials/SWOTHR_s3Access_real_data_v11.html",
    "title": "SWOT Hydrology Dataset Exploration in the Cloud",
    "section": "",
    "text": "This tutorial can only be run in an AWS cloud instance running in us-west-2: NASA Earthdata Cloud data in S3 can be directly accessed via earthaccess python library; this access is limited to requests made within the US West (Oregon) (code: us-west-2) AWS region.\n\n\n\n\nAccess SWOT HR data prodcuts (archived in NASA Earthdata Cloud) within the AWS cloud, without downloading to local machine\nVisualize accessed data for a quick check\n\n\n\n\nRiver Vector Shapefile - SWOT_L2_HR_RIVERSP_1.1\nLake Vector Shapefile - SWOT_L2_HR_LAKESP_1.1\nWater Mask Pixel Cloud NetCDF - SWOT_L2_HR_PIXC_1.1\nWater Mask Pixel Cloud Vector Attribute NetCDF - SWOT_L2_HR_PIXCVec_1.1\nRaster NetCDF - SWOT_L2_HR_Raster_1.1\nSingle Look Complex Data product - SWOT_L1B_HR_SLC_1.1\n\nNotebook Author: Cassie Nickles, NASA PO.DAAC (Aug 2023) || Other Contributors: Zoe Walschots (PO.DAAC Summer Intern 2023), Catalina Taglialatela (NASA PO.DAAC), Luis Lopez (NASA NSIDC DAAC)\nLast updated: 4 Dec 2023\n\n\n\n\n\nimport glob\nimport os\nimport requests\nimport s3fs\nimport fiona\nimport netCDF4 as nc\nimport h5netcdf\nimport xarray as xr\nimport pandas as pd\nimport geopandas as gpd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport hvplot.xarray\nimport earthaccess\nfrom earthaccess import Auth, DataCollections, DataGranules, Store\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAn Earthdata Login account is required to access data, as well as discover restricted data, from the NASA Earthdata system. Thus, to access NASA data, you need Earthdata Login. If you don’t already have one, please visit https://urs.earthdata.nasa.gov to register and manage your Earthdata Login account. This account is free to create and only takes a moment to set up. We use earthaccess to authenticate your login credentials below.\n\nauth = earthaccess.login()\n\nEARTHDATA_USERNAME and EARTHDATA_PASSWORD are not set in the current environment, try setting them or use a different strategy (netrc, interactive)\nYou're now authenticated with NASA Earthdata Login\nUsing token with expiration date: 01/07/2024\nUsing .netrc file for EDL\n\n\n\n\n\n\n\nThe s3 access link can be found using earthaccess data search. Since this collection consists of Reach and Node files, we need to extract only the granule for the Reach file. We do this by filtering for the ‘Reach’ title in the data link.\nAlternatively, Earthdata Search (see tutorial) can be used to search in a map graphic user interface.\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n\n\n\n#Retrieves granule from the day we want, in this case by passing to `earthdata.search_data` function the data collection shortname, temporal bounds, and for restricted data one must specify the search count\nriver_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_RIVERSP_1.1', \n                                        temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'),\n                                        granule_name = '*Reach*_013_NA*') # here we filter by Reach files (not node), pass #13 and continent code=NA\n\nGranules found: 14\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=river_results)\n\n\n\n\nThe native format for this data is a .zip file, and we want the .shp file within the .zip file, so we will create a Fiona AWS session using the credentials from setting up the s3fs session above to access the shapefiles within the zip files. If we don’t do this, the alternative would be to download the data to the cloud environment (e.g. EC2 instance, user S3 bucket) and extract the .zip file there.\n\nfiona_session=fiona.session.AWSSession(\n        aws_access_key_id=fs_s3.storage_options[\"key\"],\n        aws_secret_access_key=fs_s3.storage_options[\"secret\"],\n        aws_session_token=fs_s3.storage_options[\"token\"]\n    )\n\n\n# Get the link for the first zip file\nriver_link = earthaccess.results.DataGranule.data_links(river_results[0], access='direct')[0]\n\n# We use the zip+ prefix so fiona knows that we are operating on a zip file\nriver_shp_url = f\"zip+{river_link}\"\n\nwith fiona.Env(session=fiona_session):\n    SWOT_HR_shp1 = gpd.read_file(river_shp_url) \n\n#view the attribute table\nSWOT_HR_shp1 \n\n\n\n\n\n\n\n\nreach_id\ntime\ntime_tai\ntime_str\np_lat\np_lon\nriver_name\nwse\nwse_u\nwse_r_u\n...\np_wid_var\np_n_nodes\np_dist_out\np_length\np_maf\np_dam_id\np_n_ch_max\np_n_ch_mod\np_low_slp\ngeometry\n\n\n\n\n0\n77460000013\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.621824\n-124.244823\nEel River\n2.320100e+00\n9.653000e-02\n3.490000e-02\n...\n23702.805\n96\n19376.986\n19194.609276\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-124.29069 40.66364, -124.29104 40...\n\n\n1\n77460000021\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.542406\n-124.156177\nEel River\n9.248800e+00\n9.071000e-02\n1.130000e-02\n...\n3435.524\n51\n29478.836\n10101.849934\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-124.16119 40.58421, -124.16097 40...\n\n\n2\n77460000031\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.494638\n-124.107178\nEel River\n1.970160e+01\n5.754600e-01\n5.683800e-01\n...\n1202.549\n50\n39553.707\n10074.871060\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-124.13864 40.50871, -124.13829 40...\n\n\n3\n77460000041\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.447111\n-124.021272\nEel River\n3.471650e+01\n1.486718e+01\n1.486691e+01\n...\n645.984\n81\n55843.425\n16289.718636\n-1.000000e+12\n0\n1\n1\n0\nLINESTRING (-124.09611 40.46269, -124.09575 40...\n\n\n4\n77460000051\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.395990\n-123.930243\nEel River\n3.229870e+01\n9.148000e-02\n1.638000e-02\n...\n1532.658\n51\n66073.910\n10230.484650\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-123.95755 40.42295, -123.95719 40...\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n355\n78322900143\n-1.000000e+12\n-1.000000e+12\nno_data\n50.998910\n-119.011806\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n116183.841\n15\n59585.535\n2935.007230\n-1.000000e+12\n0\n1\n1\n0\nLINESTRING (-119.03134 51.00406, -119.03105 51...\n\n\n356\n78322900153\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:51Z\n51.047442\n-119.042215\nno_data\n3.451806e+02\n1.114110e+00\n1.110470e+00\n...\n41059.043\n51\n30434.699\n10168.113068\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-119.03140 51.09147, -119.03165 51...\n\n\n357\n78322900173\n-1.000000e+12\n-1.000000e+12\nno_data\n50.916115\n-119.036919\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n186564.361\n98\n39488.857\n19642.879384\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-118.99201 50.99421, -118.99200 50...\n\n\n358\n78322900183\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:52Z\n51.060235\n-118.938606\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n177029.325\n86\n56650.527\n17161.670624\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-118.99200 50.99394, -118.99201 50...\n\n\n359\n78322900211\n-1.000000e+12\n-1.000000e+12\nno_data\n50.549433\n-119.062048\nShuswap River\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n122.690\n50\n103956.987\n10074.432813\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-119.11242 50.54684, -119.11207 50...\n\n\n\n\n360 rows × 127 columns\n\n\n\n\n\n\n\n# Simple plot\nfig, ax = plt.subplots(figsize=(7,5))\nSWOT_HR_shp1.plot(ax=ax, color='black')\n\n&lt;Axes: &gt;\n\n\n\n\n\n\n# # Another way to plot geopandas dataframes is with `explore`, which also plots a basemap\n# SWOT_HR_shp1.explore()\n\n\n\n\nThe lake vector shapefiles can be accessed in the same way as the river shapefiles above.\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n\n\n\nlake_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_LAKESP_1.1', \n                                       temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'),\n                                       granule_name = '*Obs*_013_NA*') # here we filter by files with 'Obs' in the name (This collection has three options: Obs, Unassigned, and Prior), pass #13 and continent code=NA\n\nGranules found: 14\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=lake_results)\n\n\n\n\nThe native format for this data is a .zip file, and we want the .shp file within the .zip file, so we will create a Fiona AWS session using the credentials from setting up the s3fs session above to access the shapefiles within the zip files. If we don’t do this, the alternative would be to download the data to the cloud environment (e.g. EC2 instance, user S3 bucket) and extract the .zip file there.\n\nfiona_session=fiona.session.AWSSession(\n        aws_access_key_id=fs_s3.storage_options[\"key\"],\n        aws_secret_access_key=fs_s3.storage_options[\"secret\"],\n        aws_session_token=fs_s3.storage_options[\"token\"]\n    )\n\n\n# Get the link for the first zip file\nlake_link = earthaccess.results.DataGranule.data_links(lake_results[0], access='direct')[0]\n\n# We use the zip+ prefix so fiona knows that we are operating on a zip file\nlake_shp_url = f\"zip+{lake_link}\"\n\nwith fiona.Env(session=fiona_session):\n    SWOT_HR_shp2 = gpd.read_file(lake_shp_url) \n\n#view the attribute table\nSWOT_HR_shp2\n\n\n\n\n\n\n\n\nobs_id\nlake_id\noverlap\nn_overlap\nreach_id\ntime\ntime_tai\ntime_str\nwse\nwse_u\n...\nload_tidef\nload_tideg\npole_tide\ndry_trop_c\nwet_trop_c\niono_c\nxovr_cal_c\nlake_name\np_res_id\ngeometry\n\n\n\n\n0\n781229R000006\n7810001133\n85\n1\nno_data\n7.342536e+08\n7.342536e+08\n2023-04-08T07:19:21Z\n593.993\n0.011\n...\n-0.019138\n-0.018407\n-0.002311\n-2.164411\n-0.074947\n-0.003339\n-1.000000e+12\nAPPLEGATE RESERVOIR;APPLEGATE LAKE\n116\nMULTIPOLYGON (((-123.10728 42.03437, -123.1073...\n\n\n1\n782232R000018\n7820002572;7820002253\n86;80\n2\nno_data\n7.342536e+08\n7.342536e+08\n2023-04-08T07:19:51Z\n439.811\n0.167\n...\n-0.016663\n-0.016105\n-0.002303\n-2.199668\n-0.069287\n-0.003153\n-1.000000e+12\nHILLS CREEK RESERVOIR\n-99999999\nMULTIPOLYGON (((-122.45387 43.68914, -122.4539...\n\n\n2\n782243R000013\n7820039162\n10\n1\nno_data\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:40Z\n341.457\n0.003\n...\n-0.009852\n-0.009920\n-0.002187\n-2.211506\n-0.079803\n-0.002515\n-1.000000e+12\nWHITEMAN CREEK;OKANAGAN LAKE;OKANAGAN\n-99999999\nMULTIPOLYGON (((-119.72285 49.72639, -119.7227...\n\n\n3\n782243R015586\n7820039162\n17\n1\nno_data\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:48Z\n341.513\n0.028\n...\n-0.009454\n-0.009599\n-0.002172\n-2.209661\n-0.079193\n-0.002491\n-1.000000e+12\nWHITEMAN CREEK;OKANAGAN LAKE;OKANAGAN\n-99999999\nMULTIPOLYGON (((-119.49606 50.06182, -119.4961...\n\n\n4\n783245R000005\n7830263943\n32\n1\n78322700063;78322700091;78322800011;7832290001...\n7.342537e+08\n7.342537e+08\n2023-04-08T07:22:01Z\n344.832\n0.014\n...\n-0.009029\n-0.009206\n-0.002157\n-2.207273\n-0.082830\n-0.002465\n-1.000000e+12\nROSS CREEK;EAGLE RIVER;SHUSWAP;LITTLE RIVER;SC...\n-99999999\nMULTIPOLYGON (((-119.35814 50.94441, -119.3580...\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n831\n783246R009013\n7830249372;7830249352\n81;71\n2\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:13Z\n1837.232\n0.563\n...\n-0.008546\n-0.008791\n-0.002133\n-2.094712\n-0.066065\n-0.002440\n-1.000000e+12\nno_data\n-99999999\nMULTIPOLYGON (((-118.98292 51.59811, -118.9830...\n\n\n832\n783246R009931\n7830249332\n87\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n1635.514\n0.325\n...\n-0.008539\n-0.008785\n-0.002132\n-2.136184\n-0.071612\n-0.002440\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.98463 51.61215, -118.98453 51.6...\n\n\n833\n783246R010740\n7830243082\n82\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n2094.295\n5.792\n...\n-0.008558\n-0.008815\n-0.002135\n-1.942940\n-0.048756\n-0.002438\n-1.000000e+12\nno_data\n-99999999\nMULTIPOLYGON (((-119.07615 51.67504, -119.0759...\n\n\n834\n783246R010910\n7830256902\n21\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n1996.670\n0.303\n...\n-0.008524\n-0.008775\n-0.002132\n-1.863152\n-0.041920\n-0.002443\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.97489 51.63692, -118.97478 51.6...\n\n\n835\n782246R012796\n7820071012\n75\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:15Z\n1962.504\n0.385\n...\n-0.008469\n-0.008730\n-0.002128\n-2.104326\n-0.068847\n-0.002438\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.88701 51.66364, -118.88710 51.6...\n\n\n\n\n836 rows × 36 columns\n\n\n\n\n\n\n\nfig, ax = plt.subplots(figsize=(7,5))\nSWOT_HR_shp2.plot(ax=ax, color='black')\n\n&lt;Axes: &gt;\n\n\n\n\n\nAccessing the remaining files is different than the shp files above. We do not need to read the shapefiles within a zip file using something like Fiona session (or to download and unzip in the cloud) because the following SWOT HR collections are stored in netCDF files in the cloud. For the rest of the products, we will open via xarray, not geopandas.\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\npixc_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_PIXC_1.1',\n                                       temporal = ('2023-04-22 00:00:00', '2023-04-22 23:59:59'), \n                                       granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013                                       \n\nGranules found: 164\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=pixc_results)\n\n# get link for file 100\npixc_link = earthaccess.results.DataGranule.data_links(pixc_results[100], access='direct')[0]\n\ns3_file_obj3 = fs_s3.open(pixc_link, mode='rb')\n\n\n\n\nThe pixel cloud netCDF files are formatted with three groups titled, “pixel cloud”, “tvp”, or “noise” (more detail here). In order to access the coordinates and variables within the file, a group must be specified when calling xarray open_dataset.\n\nds_PIXC = xr.open_dataset(s3_file_obj3, group = 'pixel_cloud', engine='h5netcdf')\nds_PIXC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:                                (points: 5180594, complex_depth: 2,\n                                            num_pixc_lines: 3239)\nCoordinates:\n    latitude                               (points) float64 ...\n    longitude                              (points) float64 ...\nDimensions without coordinates: points, complex_depth, num_pixc_lines\nData variables: (12/57)\n    azimuth_index                          (points) float64 ...\n    range_index                            (points) float64 ...\n    interferogram                          (points, complex_depth) float32 ...\n    power_plus_y                           (points) float32 ...\n    power_minus_y                          (points) float32 ...\n    coherent_power                         (points) float32 ...\n    ...                                     ...\n    interferogram_qual                     (points) float64 ...\n    classification_qual                    (points) float64 ...\n    geolocation_qual                       (points) float64 ...\n    sig0_qual                              (points) float64 ...\n    pixc_line_qual                         (num_pixc_lines) float64 ...\n    pixc_line_to_tvp                       (num_pixc_lines) float32 ...\nAttributes:\n    description:                 cloud of geolocated interferogram pixels\n    interferogram_size_azimuth:  3239\n    interferogram_size_range:    5526\n    looks_to_efflooks:           1.5309342049156023\n    num_azimuth_looks:           7.0\n    azimuth_offset:              3xarray.DatasetDimensions:points: 5180594complex_depth: 2num_pixc_lines: 3239Coordinates: (2)latitude(points)float64...long_name :latitude (positive N, negative S)standard_name :latitudeunits :degrees_northquality_flag :geolocation_qualvalid_min :-80.0valid_max :80.0comment :Geodetic latitude [-80,80] (degrees north of equator) of the pixel.[5180594 values with dtype=float64]longitude(points)float64...long_name :longitude (degrees East)standard_name :longitudeunits :degrees_eastquality_flag :geolocation_qualvalid_min :-180.0valid_max :180.0comment :Longitude [-180,180) (east of the Greenwich meridian) of the pixel.[5180594 values with dtype=float64]Data variables: (57)azimuth_index(points)float64...long_name :rare interferogram azimuth indexunits :1valid_min :0valid_max :999999comment :Rare interferogram azimuth index (indexed from 0).[5180594 values with dtype=float64]range_index(points)float64...long_name :rare interferogram range indexunits :1valid_min :0valid_max :999999comment :Rare interferogram range index (indexed from 0).[5180594 values with dtype=float64]interferogram(points, complex_depth)float32...long_name :rare interferogramunits :1quality_flag :interferogram_qualvalid_min :-1e+20valid_max :1e+20comment :Complex unflattened rare interferogram.[10361188 values with dtype=float32]power_plus_y(points)float32...long_name :power for plus_y channelunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power for the plus_y channel (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]power_minus_y(points)float32...long_name :power for minus_y channelunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power for the minus_y channel (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]coherent_power(points)float32...long_name :coherent power combination of minus_y and plus_y channelsunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power computed by combining the plus_y and minus_y channels coherently by co-aligning the phases (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]x_factor_plus_y(points)float32...long_name :X factor for plus_y channel powerunits :1valid_min :0.0valid_max :1e+20comment :X factor for the plus_y channel power in linear units (arbitrary units to normalize noise-subtracted power to sigma0).[5180594 values with dtype=float32]x_factor_minus_y(points)float32...long_name :X factor for minus_y channel powerunits :1valid_min :0.0valid_max :1e+20comment :X factor for the minus_y channel power in linear units (arbitrary units to normalize noise-subtracted power to sigma0).[5180594 values with dtype=float32]water_frac(points)float32...long_name :water fractionunits :1quality_flag :classification_qualvalid_min :-1000.0valid_max :10000.0comment :Noisy estimate of the fraction of the pixel that is water.[5180594 values with dtype=float32]water_frac_uncert(points)float32...long_name :water fraction uncertaintyunits :1valid_min :0.0valid_max :999999.0comment :Uncertainty estimate of the water fraction estimate (width of noisy water frac estimate distribution).[5180594 values with dtype=float32]classification(points)float32...long_name :classificationquality_flag :classification_qualflag_meanings :land land_near_water water_near_land open_water dark_water low_coh_water_near_land open_low_coh_waterflag_values :[1 2 3 4 5 6 7]valid_min :1valid_max :7comment :Flags indicating water detection results.[5180594 values with dtype=float32]false_detection_rate(points)float32...long_name :false detection rateunits :1quality_flag :classification_qualvalid_min :0.0valid_max :1.0comment :Probability of falsely detecting water when there is none.[5180594 values with dtype=float32]missed_detection_rate(points)float32...long_name :missed detection rateunits :1quality_flag :classification_qualvalid_min :0.0valid_max :1.0comment :Probability of falsely detecting no water when there is water.[5180594 values with dtype=float32]prior_water_prob(points)float32...long_name :prior water probabilityunits :1valid_min :0.0valid_max :1.0comment :Prior probability of water occurring.[5180594 values with dtype=float32]bright_land_flag(points)float32...long_name :bright land flagstandard_name :status_flagflag_meanings :not_bright_land bright_land bright_land_or_waterflag_values :[0 1 2]valid_min :0valid_max :2comment :Flag indicating areas that are not typically water but are expected to be bright (e.g., urban areas, ice).  Flag value 2 indicates cases where prior data indicate land, but where prior_water_prob indicates possible water.[5180594 values with dtype=float32]layover_impact(points)float32...long_name :layover impactunits :mvalid_min :-999999.0valid_max :999999.0comment :Estimate of the height error caused by layover, which may not be reliable on a pixel by pixel basis, but may be useful to augment aggregated height uncertainties.[5180594 values with dtype=float32]eff_num_rare_looks(points)float32...long_name :effective number of rare looksunits :1valid_min :0.0valid_max :999999.0comment :Effective number of independent looks taken to form the rare interferogram.[5180594 values with dtype=float32]height(points)float32...long_name :height above reference ellipsoidunits :mquality_flag :geolocation_qualvalid_min :-1500.0valid_max :15000.0comment :Height of the pixel above the reference ellipsoid.[5180594 values with dtype=float32]cross_track(points)float32...long_name :approximate cross-track locationunits :mquality_flag :geolocation_qualvalid_min :-75000.0valid_max :75000.0comment :Approximate cross-track location of the pixel.[5180594 values with dtype=float32]pixel_area(points)float32...long_name :pixel areaunits :m^2quality_flag :geolocation_qualvalid_min :0.0valid_max :999999.0comment :Pixel area.[5180594 values with dtype=float32]inc(points)float32...long_name :incidence angleunits :degreesquality_flag :geolocation_qualvalid_min :0.0valid_max :999999.0comment :Incidence angle.[5180594 values with dtype=float32]phase_noise_std(points)float32...long_name :phase noise standard deviationunits :radiansvalid_min :-999999.0valid_max :999999.0comment :Estimate of the phase noise standard deviation.[5180594 values with dtype=float32]dlatitude_dphase(points)float32...long_name :sensitivity of latitude estimate to interferogram phaseunits :degrees/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the latitude estimate to the interferogram phase.[5180594 values with dtype=float32]dlongitude_dphase(points)float32...long_name :sensitivity of longitude estimate to interferogram phaseunits :degrees/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the longitude estimate to the interferogram phase.[5180594 values with dtype=float32]dheight_dphase(points)float32...long_name :sensitivity of height estimate to interferogram phaseunits :m/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the interferogram phase.[5180594 values with dtype=float32]dheight_droll(points)float32...long_name :sensitivity of height estimate to spacecraft rollunits :m/degreesquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the spacecraft roll.[5180594 values with dtype=float32]dheight_dbaseline(points)float32...long_name :sensitivity of height estimate to interferometric baselineunits :m/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the interferometric baseline.[5180594 values with dtype=float32]dheight_drange(points)float32...long_name :sensitivity of height estimate to range (delay)units :m/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the range (delay).[5180594 values with dtype=float32]darea_dheight(points)float32...long_name :sensitivity of pixel area to reference heightunits :m^2/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the pixel area to the reference height.[5180594 values with dtype=float32]illumination_time(points)datetime64[ns]...long_name :time of illumination of each pixel (UTC)standard_name :timetai_utc_difference :37.0leap_second :0000-00-00T00:00:00Zcomment :Time of measurement in seconds in the UTC time scale since 1 Jan 2000 00:00:00 UTC. [tai_utc_difference] is the difference between TAI and UTC reference time (seconds) for the first measurement of the data set. If a leap second occurs within the data set, the attribute leap_second is set to the UTC time at which the leap second occurs.[5180594 values with dtype=datetime64[ns]]illumination_time_tai(points)datetime64[ns]...long_name :time of illumination of each pixel (TAI)standard_name :timecomment :Time of measurement in seconds in the TAI time scale since 1 Jan 2000 00:00:00 TAI. This time scale contains no leap seconds. The difference (in seconds) with time in UTC is given by the attribute [illumination_time:tai_utc_difference].[5180594 values with dtype=datetime64[ns]]eff_num_medium_looks(points)float32...long_name :effective number of medium looksunits :1valid_min :0.0valid_max :999999.0comment :Effective number of independent looks taken in forming the medium interferogram (after adaptive averaging).[5180594 values with dtype=float32]sig0(points)float32...long_name :sigma0units :1quality_flag :sig0_qualvalid_min :-999999.0valid_max :999999.0comment :Normalized radar cross section (sigma0) in real, linear units (not decibels). The value may be negative due to noise subtraction.[5180594 values with dtype=float32]sig0_uncert(points)float32...long_name :sigma0 uncertaintyunits :1valid_min :-999999.0valid_max :999999.0comment :1-sigma uncertainty in the sig0 measurement.  The value is given as an additive (not multiplicative) linear term (not a term in decibels).[5180594 values with dtype=float32]phase_unwrapping_region(points)float64...long_name :phase unwrapping region indexunits :1valid_min :-1valid_max :99999999comment :Phase unwrapping region index.[5180594 values with dtype=float64]ambiguity_cost1(points)float32...long_name :phase ambiguity minimum costunits :1valid_min :-999999.0valid_max :999999.0comment :Phase ambiguity minimum cost.[5180594 values with dtype=float32]ambiguity_cost2(points)float32...long_name :phase ambiguity 2nd minimum costunits :1valid_min :-999999.0valid_max :999999.0comment :Phase ambiguity 2nd minimum cost.[5180594 values with dtype=float32]instrument_range_cor(points)float32...long_name :instrument range correctionunits :mvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to range before geolocation.[5180594 values with dtype=float32]instrument_phase_cor(points)float32...long_name :instrument phase correctionunits :radiansvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to phase before geolocation.[5180594 values with dtype=float32]instrument_baseline_cor(points)float32...long_name :instrument baseline correctionunits :mvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to baseline before geolocation.[5180594 values with dtype=float32]sig0_cor_atmos_model(points)float32...long_name :two-way atmospheric correction to sigma0 from modelsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :1valid_min :1.0valid_max :10.0comment :Atmospheric correction to sigma0 from weather model data as a linear power multiplier (not decibels). sig0_cor_atmos_model is already applied in computing sig0 and x_factor_plus_y and x_factor_minus_y.[5180594 values with dtype=float32]height_cor_xover(points)float32...long_name :height correction from KaRIn crossoversunits :mvalid_min :-10.0valid_max :10.0comment :Height correction from KaRIn crossover calibration. The correction is applied before geolocation but reported as an equivalent height correction.[5180594 values with dtype=float32]model_dry_tropo_cor(points)float32...long_name :dry troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :mvalid_min :-3.0valid_max :-1.5comment :Equivalent vertical correction due to dry troposphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]model_wet_tropo_cor(points)float32...long_name :wet troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :mvalid_min :-1.0valid_max :0.0comment :Equivalent vertical correction due to wet troposphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]iono_cor_gim_ka(points)float32...long_name :ionosphere vertical correctionsource :Global Ionosphere Mapsinstitution :JPLunits :mvalid_min :-0.5valid_max :0.0comment :Equivalent vertical correction due to ionosphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]geoid(points)float32...long_name :geoid heightstandard_name :geoid_height_above_reference_ellipsoidsource :EGM2008 (Pavlis et al., 2012)units :mvalid_min :-150.0valid_max :150.0comment :Geoid height above the reference ellipsoid with a correction to refer the value to the mean tide system, i.e. includes the permanent tide (zero frequency).  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]solid_earth_tide(points)float32...long_name :solid Earth tide heightsource :Cartwright and Taylor (1971) and Cartwright and Edden (1973)units :mvalid_min :-1.0valid_max :1.0comment :Solid-Earth (body) tide height. The zero-frequency permanent tide component is not included.  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]load_tide_fes(points)float32...long_name :geocentric load tide height (FES)source :FES2014b (Carrere et al., 2016)institution :LEGOS/CNESunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth's crust. This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]load_tide_got(points)float32...long_name :geocentric load tide height (GOT)source :GOT4.10c (Ray, 2013)institution :GSFCunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth's crust. This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]pole_tide(points)float32...long_name :geocentric pole tide heightsource :Wahr (1985) and Desai et al. (2015)units :mvalid_min :-0.2valid_max :0.2comment :Geocentric pole tide height. The total of the contribution from the solid-Earth (body) pole tide height and the load pole tide height (i.e., the effect of the ocean pole tide loading of the Earth's crust).  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]ancillary_surface_classification_flag(points)float32...long_name :surface classificationstandard_name :status_flagsource :MODIS/GlobCoverinstitution :European Space Agencyflag_meanings :open_ocean land continental_water aquatic_vegetation continental_ice_snow floating_ice salted_basinflag_values :[0 1 2 3 4 5 6]valid_min :0valid_max :6comment :7-state surface type classification computed from a mask built with MODIS and GlobCover data.[5180594 values with dtype=float32]interferogram_qual(points)float64...standard_name :status_flagflag_meanings :rare_power_suspect rare_phase_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded rare_power_bad rare_phase_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[      2048       4096       8192      16384      32768     262144\n     524288  134217728  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4161599488comment :Quality flag for the interferogram quantities in the pixel cloud data[5180594 values with dtype=float64]classification_qual(points)float64...standard_name :status_flagflag_meanings :no_coherent_gain power_close_to_noise_floor detected_water_but_no_prior_water detected_water_but_bright_land water_false_detection_rate_suspect coherent_power_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded coherent_power_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8         16       2048\n       8192      16384      32768     262144     524288  134217728\n  536870912 1073741824 2147483648]valid_min :0valid_max :3893159967comment :Quality flag for the classification quantities in the pixel cloud data[5180594 values with dtype=float64]geolocation_qual(points)float64...standard_name :status_flagflag_meanings :layover_significant phase_noise_suspect phase_unwrapping_suspect model_dry_tropo_cor_suspect model_wet_tropo_cor_suspect iono_cor_gim_ka_suspect xovercal_suspect medium_phase_suspect tvp_suspect sc_event_suspect small_karin_gap specular_ringing_degraded model_dry_tropo_cor_missing model_wet_tropo_cor_missing iono_cor_gim_ka_missing xovercal_missing geolocation_is_from_refloc no_geolocation_bad medium_phase_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8         16         32\n         64       4096       8192      16384      32768     524288\n    1048576    2097152    4194304    8388608   16777216  134217728\n  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4193841279comment :Quality flag for the geolocation quantities in the pixel cloud data[5180594 values with dtype=float64]sig0_qual(points)float64...standard_name :status_flagflag_meanings :sig0_uncert_suspect sig0_cor_atmos_suspect noise_power_suspect xfactor_suspect rare_power_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded sig0_cor_atmos_missing noise_power_bad xfactor_bad rare_power_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8       2048       8192\n      16384      32768     262144     524288    1048576   33554432\n   67108864  134217728  536870912 1073741824 2147483648]valid_min :0valid_max :3994871823comment :Quality flag for sig0[5180594 values with dtype=float64]pixc_line_qual(num_pixc_lines)float64...standard_name :status_flagflag_meanings :not_in_tile tvp_suspect sc_event_suspect small_karin_gap tvp_bad sc_event_bad large_karin_gapflag_masks :[         1       8192      16384      32768  536870912 1073741824\n 2147483649]valid_min :0valid_max :3758153729comment :Quality flag for pixel cloud data per rare-posted interferogram line (similar to slc_qual in the L1B_HR_SLC product)[3239 values with dtype=float64]pixc_line_to_tvp(num_pixc_lines)float32...long_name :pixel cloud rare line to tvp indexunits :1valid_min :0.0valid_max :999999.0comment :Pixel cloud rare radar grid line index to tvp index mapping[3239 values with dtype=float32]Indexes: (0)Attributes: (6)description :cloud of geolocated interferogram pixelsinterferogram_size_azimuth :3239interferogram_size_range :5526looks_to_efflooks :1.5309342049156023num_azimuth_looks :7.0azimuth_offset :3\n\n\n\n\n\n\n# This could take a few minutes to plot\nplt.scatter(x=ds_PIXC.longitude, y=ds_PIXC.latitude, c=ds_PIXC.height)\nplt.colorbar().set_label('Height (m)')\n\n\n\n\n\n\n\n\n\n\n\npixcvec_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_PIXCVEC_1.1', \n                                          temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'), \n                                          granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013 \n\nGranules found: 100\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=pixcvec_results)\n\n# get link for file 0\npixcvec_link = earthaccess.results.DataGranule.data_links(pixcvec_results[0], access='direct')[0]\n\ns3_file_obj4 = fs_s3.open(pixcvec_link, mode='rb')\n\n\n\n\n\nds_PIXCVEC = xr.open_dataset(s3_file_obj4, decode_cf=False,  engine='h5netcdf')\nds_PIXCVEC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:               (points: 11174047, nchar_reach_id: 11,\n                           nchar_node_id: 14, nchar_lake_id: 10,\n                           nchar_obs_id: 13)\nDimensions without coordinates: points, nchar_reach_id, nchar_node_id,\n                                nchar_lake_id, nchar_obs_id\nData variables:\n    azimuth_index         (points) int32 ...\n    range_index           (points) int32 ...\n    latitude_vectorproc   (points) float64 ...\n    longitude_vectorproc  (points) float64 ...\n    height_vectorproc     (points) float32 ...\n    reach_id              (points, nchar_reach_id) |S1 ...\n    node_id               (points, nchar_node_id) |S1 ...\n    lake_id               (points, nchar_lake_id) |S1 ...\n    obs_id                (points, nchar_obs_id) |S1 ...\n    ice_clim_f            (points) int8 ...\n    ice_dyn_f             (points) int8 ...\nAttributes: (12/45)\n    Conventions:                     CF-1.7\n    title:                           Level 2 KaRIn high rate pixel cloud vect...\n    short_name:                      L2_HR_PIXCVec\n    institution:                     JPL\n    source:                          Level 1B KaRIn High Rate Single Look Com...\n    history:                         2023-09-07T04:43:11.652934Z: Creation\n    ...                              ...\n    xref_prior_river_db_file:        \n    xref_prior_lake_db_file:         SWOT_LakeDatabase_Cal_013_20000101T00000...\n    xref_reforbittrack_files:        SWOT_RefOrbitTrackTileBoundary_Cal_20000...\n    xref_param_l2_hr_laketile_file:  SWOT_Param_L2_HR_LakeTile_20000101T00000...\n    ellipsoid_semi_major_axis:       6378137.0\n    ellipsoid_flattening:            0.0033528106647474805xarray.DatasetDimensions:points: 11174047nchar_reach_id: 11nchar_node_id: 14nchar_lake_id: 10nchar_obs_id: 13Coordinates: (0)Data variables: (11)azimuth_index(points)int32..._FillValue :2147483647long_name :rare interferogram azimuth indexunits :1valid_min :0valid_max :999999coordinates :longitude_vectorproc latitude_vectorproccomment :Rare interferogram azimuth index (indexed from 0).[11174047 values with dtype=int32]range_index(points)int32..._FillValue :2147483647long_name :rare interferogram range indexunits :1valid_min :0valid_max :999999coordinates :longitude_vectorproc latitude_vectorproccomment :Rare interferogram range index (indexed from 0).[11174047 values with dtype=int32]latitude_vectorproc(points)float64..._FillValue :9.969209968386869e+36long_name :height-constrained geolocation latitudestandard_name :latitudeunits :degrees_northvalid_min :-80.0valid_max :80.0comment :Height-constrained geodetic latitude of the pixel. Units are in degrees north of the equator.[11174047 values with dtype=float64]longitude_vectorproc(points)float64..._FillValue :9.969209968386869e+36long_name :height-constrained geolocation longitudestandard_name :longitudeunits :degrees_eastvalid_min :-180.0valid_max :180.0comment :Height-constrained geodetic longitude of the pixel. Positive=degrees east of the Greenwich meridian. Negative=degrees west of the Greenwich meridian.[11174047 values with dtype=float64]height_vectorproc(points)float32..._FillValue :9.96921e+36long_name :height above reference ellipsoidunits :mvalid_min :-1500.0valid_max :15000.0coordinates :longitude_vectorproc latitude_vectorproccomment :Height-constrained height of the pixel above the reference ellipsoid.[11174047 values with dtype=float32]reach_id(points, nchar_reach_id)|S1...long_name :identifier of the associated prior river reachcoordinates :longitude_vectorproc latitude_vectorproccomment :Unique reach identifier from the prior river database. The format of the identifier is CBBBBBRRRRT, where C=continent, B=basin, R=reach, T=type.[122914517 values with dtype=|S1]node_id(points, nchar_node_id)|S1...long_name :identifier of the associated prior river nodecoordinates :longitude_vectorproc latitude_vectorproccomment :Unique node identifier from the prior river database. The format of the identifier is CBBBBBRRRRNNNT, where C=continent, B=basin, R=reach, N=node, T=type of water body.[156436658 values with dtype=|S1]lake_id(points, nchar_lake_id)|S1...long_name :identifier of the associated prior lakecoordinates :longitude_vectorproc latitude_vectorproccomment :Identifier of the lake from the lake prior database) associated to the pixel. The format of the identifier is CBBNNNNNNT, where C=continent, B=basin, N=counter within the basin, T=type of water body.[111740470 values with dtype=|S1]obs_id(points, nchar_obs_id)|S1...long_name :identifier of the observed featurecoordinates :longitude_vectorproc latitude_vectorproccomment :Tile-specific identifier of the observed feature associated to the pixel. The format of the identifier is CBBTTTSNNNNNN, where C=continent, B=basin, T=tile number, S=swath side, N=lake counter within the PIXC tile.[145262611 values with dtype=|S1]ice_clim_f(points)int8..._FillValue :127long_name :climatological ice cover flagflag_meanings :no_ice_cover uncertain_ice_cover full_ice_coverflag_values :[0 1 2]institution :University of North Carolinacoordinates :longitude_vectorproc latitude_vectorproccomment :Climatological ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on external climatological information (not the SWOT measurement). Values of 0, 1, and 2 indicate that the surface is not ice covered, may or may not be partially or fully ice covered, and fully ice covered, respectively. A value of 127 indicates that this flag is not available.[11174047 values with dtype=int8]ice_dyn_f(points)int8..._FillValue :127long_name :dynamical ice cover flagflag_meanings :no_ice_cover partial_ice_cover full_ice_coverflag_values :[0 1 2]institution :University of North Carolinacoordinates :longitude_vectorproc latitude_vectorproccomment :Dynamic ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on analysis of external satellite optical data. Values of 0, 1, and 2 indicate that the surface is not ice covered, partially ice covered, and fully ice covered, respectively. A value of 255 indicates that this flag is not available.[11174047 values with dtype=int8]Indexes: (0)Attributes: (45)Conventions :CF-1.7title :Level 2 KaRIn high rate pixel cloud vector attribute productshort_name :L2_HR_PIXCVecinstitution :JPLsource :Level 1B KaRIn High Rate Single Look Complex Data Producthistory :2023-09-07T04:43:11.652934Z: Creationplatform :SWOTreferences :SWOT-DD-CDM-0565-CNES_SAS_Design_L2_HR_LakeSP - Revision A - 20220531reference_document :SWOT-TN-CDM-0677-CNES_Product_Description_L2_HR_PIXCVec - Revision A - 20220531product_version :V5.2.0crid :PIB0pge_name :PGE_L2_HR_LakeSPpge_version :V4.2.0contact :SWOT-contact@cnes.frcycle_number :498pass_number :13tile_number :223swath_side :Rtile_name :013_223Rcontinent_id :NAcontinent_code :7time_granule_start :2023-04-22T05:07:12.471771Ztime_granule_end :2023-04-22T05:07:23.493987Ztime_coverage_start :2023-04-22T05:07:13.018824Ztime_coverage_end :2023-04-22T05:07:22.948748Zgeospatial_lon_min :-124.56790968330785geospatial_lon_max :-123.63542466025933geospatial_lat_min :38.55706990508294geospatial_lat_max :39.315223768521015inner_first_longitude :-124.56790968330785inner_first_latitude :38.69222477165863inner_last_longitude :-124.38372359338888inner_last_latitude :39.315223768521015outer_first_longitude :-123.82494326341896outer_first_latitude :38.55706990508294outer_last_longitude :-123.63542466025933outer_last_latitude :39.17838265794308xref_l2_hr_pixc_file :SWOT_L2_HR_PIXC_498_013_223R_20230422T050712_20230422T050723_PIB0_01.ncxref_l2_hr_pixcvecriver_file :SWOT_L2_HR_PIXCVecRiver_498_013_223R_20230422T050712_20230422T050723_PIB0_01.ncxref_prior_river_db_file :xref_prior_lake_db_file :SWOT_LakeDatabase_Cal_013_20000101T000000_20991231T235959_20230614T000000_v102.sqlitexref_reforbittrack_files :SWOT_RefOrbitTrackTileBoundary_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txtxref_param_l2_hr_laketile_file :SWOT_Param_L2_HR_LakeTile_20000101T000000_20991231T235959_20230614T170000_v410.cfgellipsoid_semi_major_axis :6378137.0ellipsoid_flattening :0.0033528106647474805\n\n\n\n\n\n\npixcvec_htvals = ds_PIXCVEC.height_vectorproc.compute()\npixcvec_latvals = ds_PIXCVEC.latitude_vectorproc.compute()\npixcvec_lonvals = ds_PIXCVEC.longitude_vectorproc.compute()\n\n#Before plotting, we set all fill values to nan so that the graph shows up better spatially\npixcvec_htvals[pixcvec_htvals &gt; 15000] = np.nan\npixcvec_latvals[pixcvec_latvals &gt; 80] = np.nan\npixcvec_latvals[pixcvec_latvals &lt; -80] = np.nan\npixcvec_lonvals[pixcvec_lonvals &gt; 180] = np.nan\npixcvec_lonvals[pixcvec_lonvals &lt; -180] = np.nan\n\n\nplt.scatter(x=pixcvec_lonvals, y=pixcvec_latvals, c=pixcvec_htvals)\nplt.colorbar().set_label('Height (m)')\n\n\n\n\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n#Say we know the exact cycle, pass & scene. We can search for one data granule!\nraster_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_Raster_1.1', \n                                         temporal = ('2023-04-01 00:00:00', '2023-04-22 23:59:59'), \n                                         granule_name = '*100m*_498_013_130F*') # here we filter by files with '100m' in the name (This collection has two resolution options: 100m & 250m), cycle=498, pass=013, scene = 130F \n\nGranules found: 1\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=raster_results)\n\n# get link for file \nraster_link = earthaccess.results.DataGranule.data_links(raster_results[0], access='direct')[0]\n\ns3_file_obj5 = fs_s3.open(raster_link, mode='rb')\n\n\n\n\n\nds_raster = xr.open_dataset(s3_file_obj5, engine='h5netcdf')\nds_raster\n\n/srv/conda/envs/notebook/lib/python3.10/site-packages/xarray/coding/times.py:254: RuntimeWarning: invalid value encountered in cast\n  flat_num_dates_ns_int = (flat_num_dates * _NS_PER_TIME_DELTA[delta]).astype(\n/srv/conda/envs/notebook/lib/python3.10/site-packages/xarray/coding/times.py:254: RuntimeWarning: invalid value encountered in cast\n  flat_num_dates_ns_int = (flat_num_dates * _NS_PER_TIME_DELTA[delta]).astype(\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:                  (x: 1652, y: 1651)\nCoordinates:\n  * x                        (x) float64 5.438e+05 5.439e+05 ... 7.089e+05\n  * y                        (y) float64 6.468e+06 6.468e+06 ... 6.633e+06\nData variables: (12/39)\n    crs                      object ...\n    longitude                (y, x) float64 ...\n    latitude                 (y, x) float64 ...\n    wse                      (y, x) float32 ...\n    wse_qual                 (y, x) float32 ...\n    wse_qual_bitwise         (y, x) float64 ...\n    ...                       ...\n    load_tide_fes            (y, x) float32 ...\n    load_tide_got            (y, x) float32 ...\n    pole_tide                (y, x) float32 ...\n    model_dry_tropo_cor      (y, x) float32 ...\n    model_wet_tropo_cor      (y, x) float32 ...\n    iono_cor_gim_ka          (y, x) float32 ...\nAttributes: (12/49)\n    Conventions:                   CF-1.7\n    title:                         Level 2 KaRIn High Rate Raster Data Product\n    source:                        Ka-band radar interferometer\n    history:                       2023-09-13T20:22:58Z : Creation\n    platform:                      SWOT\n    reference_document:            JPL D-56416 - Revision B - October 24, 2022\n    ...                            ...\n    x_max:                         708900.0\n    y_min:                         6467900.0\n    y_max:                         6632900.0\n    institution:                   JPL\n    references:                    V1.0\n    product_version:               01xarray.DatasetDimensions:x: 1652y: 1651Coordinates: (2)x(x)float645.438e+05 5.439e+05 ... 7.089e+05long_name :x coordinate of projectionstandard_name :projection_x_coordinateunits :mvalid_min :-10000000.0valid_max :10000000.0comment :UTM easting coordinate of the pixel.array([543800., 543900., 544000., ..., 708700., 708800., 708900.])y(y)float646.468e+06 6.468e+06 ... 6.633e+06long_name :y coordinate of projectionstandard_name :projection_y_coordinateunits :mvalid_min :-20000000.0valid_max :20000000.0comment :UTM northing coordinate of the pixel.array([6467900., 6468000., 6468100., ..., 6632700., 6632800., 6632900.])Data variables: (39)crs()object...long_name :CRS Definitiongrid_mapping_name :transverse_mercatorprojected_crs_name :WGS 84 / UTM zone 11Ngeographic_crs_name :WGS 84reference_ellipsoid_name :WGS 84horizontal_datum_name :WGS_1984prime_meridian_name :Greenwichfalse_easting :500000.0false_northing :0.0longitude_of_central_meridian :-117.0longitude_of_prime_meridian :0.0latitude_of_projection_origin :0.0scale_factor_at_central_meridian :0.9996semi_major_axis :6378137.0inverse_flattening :298.257223563crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]comment :UTM zone coordinate reference system.[1 values with dtype=object]longitude(y, x)float64...long_name :longitude (degrees East)standard_name :longitudegrid_mapping :crsunits :degrees_eastvalid_min :-180.0valid_max :180.0comment :Geodetic longitude [-180,180) (east of the Greenwich meridian) of the pixel.[2727452 values with dtype=float64]latitude(y, x)float64...long_name :latitude (positive N, negative S)standard_name :latitudegrid_mapping :crsunits :degrees_northvalid_min :-80.0valid_max :80.0comment :Geodetic latitude [-80,80] (degrees north of equator) of the pixel.[2727452 values with dtype=float64]wse(y, x)float32...long_name :water surface elevation above geoidgrid_mapping :crsunits :mquality_flag :wse_qualvalid_min :-1500.0valid_max :15000.0comment :Water surface elevation of the pixel above the geoid and after using models to subtract the effects of tides (solid_earth_tide, load_tide_fes, pole_tide).[2727452 values with dtype=float32]wse_qual(y, x)float32...long_name :summary quality indicator for the water surface elevationstandard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the water surface elevation quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]wse_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the water surface elevationstandard_name :status_flaggrid_mapping :crsflag_meanings :classification_qual_suspect geolocation_qual_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         2          4         32        128       4096       8192\n      16384     262144     524288   16777216  268435456  536870912\n 1073741824 2147483648]valid_min :0valid_max :4044124326comment :Bitwise quality indicator for the water surface elevation quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]wse_uncert(y, x)float32...long_name :uncertainty in the water surface elevationgrid_mapping :crsunits :mvalid_min :0.0valid_max :999999.0comment :1-sigma uncertainty in the water surface elevation.[2727452 values with dtype=float32]water_area(y, x)float32...long_name :water surface areagrid_mapping :crsunits :m^2quality_flag :water_area_qualvalid_min :-2000000.0valid_max :2000000000.0comment :Surface area of the water pixels.[2727452 values with dtype=float32]water_area_qual(y, x)float32...long_name :summary quality indicator for the water surface areastandard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the water surface area and water fraction quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]water_area_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the water surface areastandard_name :status_flaggrid_mapping :crsflag_meanings :classification_qual_suspect geolocation_qual_suspect water_fraction_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         2          4          8         32        128       4096\n       8192      16384     262144     524288   16777216  268435456\n  536870912 1073741824 2147483648]valid_min :0valid_max :4044124334comment :Bitwise quality indicator for the water surface area and water fraction quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]water_area_uncert(y, x)float32...long_name :uncertainty in the water surface areagrid_mapping :crsunits :m^2valid_min :0.0valid_max :2000000000.0comment :1-sigma uncertainty in the water surface area.[2727452 values with dtype=float32]water_frac(y, x)float32...long_name :water fractiongrid_mapping :crsunits :1quality_flag :water_area_qualvalid_min :-1000.0valid_max :10000.0comment :Fraction of the pixel that is water.[2727452 values with dtype=float32]water_frac_uncert(y, x)float32...long_name :uncertainty in the water fractiongrid_mapping :crsunits :1valid_min :0.0valid_max :999999.0comment :1-sigma uncertainty in the water fraction.[2727452 values with dtype=float32]sig0(y, x)float32...long_name :sigma0grid_mapping :crsunits :1quality_flag :sig0_qualvalid_min :-1000.0valid_max :10000000.0comment :Normalized radar cross section (sigma0) in real, linear units (not decibels). The value may be negative due to noise subtraction.[2727452 values with dtype=float32]sig0_qual(y, x)float32...long_name :summary quality indicator for the sigma0standard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the sigma0 quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]sig0_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the sigma0standard_name :status_flaggrid_mapping :crsflag_meanings :sig0_qual_suspect classification_qual_suspect geolocation_qual_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect sig0_qual_degraded classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         1          2          4         32        128       4096\n       8192      16384     131072     262144     524288   16777216\n  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4044255399comment :Bitwise quality indicator for the sigma0 quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]sig0_uncert(y, x)float32...long_name :uncertainty in sigma0grid_mapping :crsunits :1valid_min :0.0valid_max :1000.0comment :1-sigma uncertainty in sigma0. The value is provided in linear units. This value is a one-sigma additive (not multiplicative) uncertainty term, which can be added to or subtracted from sigma0.[2727452 values with dtype=float32]inc(y, x)float32...long_name :incidence anglegrid_mapping :crsunits :degreesvalid_min :0.0valid_max :90.0comment :Incidence angle.[2727452 values with dtype=float32]cross_track(y, x)float32...long_name :approximate cross-track locationgrid_mapping :crsunits :mvalid_min :-75000.0valid_max :75000.0comment :Approximate cross-track location of the pixel.[2727452 values with dtype=float32]illumination_time(y, x)datetime64[ns]...long_name :time of illumination of each pixel (UTC)standard_name :timetai_utc_difference :37.0leap_second :0000-00-00T00:00:00Zcomment :Time of measurement in seconds in the UTC time scale since 1 Jan 2000 00:00:00 UTC. [tai_utc_difference] is the difference between TAI and UTC reference time (seconds) for the first measurement of the data set. If a leap second occurs within the data set, the attribute leap_second is set to the UTC time at which the leap second occurs.[2727452 values with dtype=datetime64[ns]]illumination_time_tai(y, x)datetime64[ns]...long_name :time of illumination of each pixel (TAI)standard_name :timecomment :Time of measurement in seconds in the TAI time scale since 1 Jan 2000 00:00:00 TAI. This time scale contains no leap seconds. The difference (in seconds) with time in UTC is given by the attribute [illumination_time:tai_utc_difference].[2727452 values with dtype=datetime64[ns]]n_wse_pix(y, x)float64...long_name :number of water surface elevation pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in water surface elevation aggregation.[2727452 values with dtype=float64]n_water_area_pix(y, x)float64...long_name :number of water surface area pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in water surface area and water fraction aggregation.[2727452 values with dtype=float64]n_sig0_pix(y, x)float64...long_name :number of sigma0 pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in sigma0 aggregation.[2727452 values with dtype=float64]n_other_pix(y, x)float64...long_name :number of other pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in aggregation of quantities not related to water surface elevation, water surface area, water fraction or sigma0.[2727452 values with dtype=float64]dark_frac(y, x)float32...long_name :fractional area of dark watergrid_mapping :crsunits :lvalid_min :-1000.0valid_max :10000.0comment :Fraction of pixel water surface area covered by dark water.[2727452 values with dtype=float32]ice_clim_flag(y, x)float32...long_name :climatological ice cover flagstandard_name :status_flagsource :UNCgrid_mapping :crsflag_meanings :no_ice_cover uncertain_ice_cover full_ice_coverflag_values :[0 1 2]valid_min :0valid_max :2comment :Climatological ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on external climatological information (not the SWOT measurement). Values of 0, 1, and 2 indicate that the pixel is likely not ice covered, may or may not be partially or fully ice covered, and likely fully ice covered, respectively.[2727452 values with dtype=float32]ice_dyn_flag(y, x)float32...long_name :dynamic ice cover flagstandard_name :status_flagsource :UNCgrid_mapping :crsflag_meanings :no_ice_cover partial_ice_cover full_ice_coverflag_values :[0 1 2]valid_min :0valid_max :2comment :Dynamic ice cover flag indicating whether the surface is ice-covered on the day of the observation based on analysis of external satellite optical data.  Values of 0, 1, and 2 indicate that the pixel is not ice covered, partially ice covered, and fully ice covered, respectively.[2727452 values with dtype=float32]layover_impact(y, x)float32...long_name :layover impactgrid_mapping :crsunits :mvalid_min :-999999.0valid_max :999999.0comment :Estimate of the water surface elevation error caused by layover.[2727452 values with dtype=float32]sig0_cor_atmos_model(y, x)float32...long_name :two-way atmospheric correction to sigma0 from modelsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :1valid_min :1.0valid_max :10.0comment :Atmospheric correction to sigma0 from weather model data as a linear power multiplier (not decibels). sig0_cor_atmos_model is already applied in computing sig0.[2727452 values with dtype=float32]height_cor_xover(y, x)float32...long_name :height correction from KaRIn crossoversgrid_mapping :crsunits :mvalid_min :-10.0valid_max :10.0comment :Height correction from KaRIn crossover calibration. The correction is applied before geolocation but reported as an equivalent height correction.[2727452 values with dtype=float32]geoid(y, x)float32...long_name :geoid heightstandard_name :geoid_height_above_reference_ellipsoidsource :EGM2008 (Pavlis et al., 2012)grid_mapping :crsunits :mvalid_min :-150.0valid_max :150.0comment :Geoid height above the reference ellipsoid with a correction to refer the value to the mean tide system, i.e. includes the permanent tide (zero frequency).[2727452 values with dtype=float32]solid_earth_tide(y, x)float32...long_name :solid Earth tide heightsource :Cartwright and Taylor (1971) and Cartwright and Edden (1973)grid_mapping :crsunits :mvalid_min :-1.0valid_max :1.0comment :Solid-Earth (body) tide height. The zero-frequency permanent tide component is not included.[2727452 values with dtype=float32]load_tide_fes(y, x)float32...long_name :geocentric load tide height (FES)source :FES2014b (Carrere et al., 2016)institution :LEGOS/CNESgrid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth’s crust.[2727452 values with dtype=float32]load_tide_got(y, x)float32...long_name :geocentric load tide height (GOT)source :GOT4.10c (Ray, 2013)institution :GSFCgrid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth’s crust. This value is reported for reference but is not applied to the reported height.[2727452 values with dtype=float32]pole_tide(y, x)float32...long_name :geocentric pole tide heightsource :Wahr (1985) and Desai et al. (2015)grid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric pole tide height. The total of the contribution from the solid-Earth (body) pole tide height and the load pole tide height (i.e., the effect of the ocean pole tide loading of the Earth’s crust).[2727452 values with dtype=float32]model_dry_tropo_cor(y, x)float32...long_name :dry troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :mvalid_min :-3.0valid_max :-1.5comment :Equivalent vertical correction due to dry troposphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]model_wet_tropo_cor(y, x)float32...long_name :wet troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :mvalid_min :-1.0valid_max :0.0comment :Equivalent vertical correction due to wet troposphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]iono_cor_gim_ka(y, x)float32...long_name :ionosphere vertical correctionsource :Global Ionosphere Mapsinstitution :JPLgrid_mapping :crsunits :mvalid_min :-0.5valid_max :0.0comment :Equivalent vertical correction due to ionosphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]Indexes: (2)xPandasIndexPandasIndex(Float64Index([543800.0, 543900.0, 544000.0, 544100.0, 544200.0, 544300.0,\n              544400.0, 544500.0, 544600.0, 544700.0,\n              ...\n              708000.0, 708100.0, 708200.0, 708300.0, 708400.0, 708500.0,\n              708600.0, 708700.0, 708800.0, 708900.0],\n             dtype='float64', name='x', length=1652))yPandasIndexPandasIndex(Float64Index([6467900.0, 6468000.0, 6468100.0, 6468200.0, 6468300.0, 6468400.0,\n              6468500.0, 6468600.0, 6468700.0, 6468800.0,\n              ...\n              6632000.0, 6632100.0, 6632200.0, 6632300.0, 6632400.0, 6632500.0,\n              6632600.0, 6632700.0, 6632800.0, 6632900.0],\n             dtype='float64', name='y', length=1651))Attributes: (49)Conventions :CF-1.7title :Level 2 KaRIn High Rate Raster Data Productsource :Ka-band radar interferometerhistory :2023-09-13T20:22:58Z : Creationplatform :SWOTreference_document :JPL D-56416 - Revision B - October 24, 2022contact :alexander.t.corben[at]jpl.nasa.govcycle_number :498pass_number :13scene_number :130tile_numbers :[258 259 260 261 258 259 260 261]tile_names :013_258L, 013_259L, 013_260L, 013_261L, 013_258R, 013_259R, 013_260R, 013_261Rtile_polarizations :H, H, H, H, V, V, V, Vcoordinate_reference_system :Universal Transverse Mercatorresolution :100.0short_name :L2_HR_Rasterdescriptor_string :100m_UTM11V_N_x_x_xcrid :PIB0pge_name :PGE_L2_HR_RASTERpge_version :4.3.1time_granule_start :2023-04-22T05:13:10.260709Ztime_granule_end :2023-04-22T05:13:31.241801Ztime_coverage_start :2023-04-22T05:13:10.800929Ztime_coverage_end :2023-04-22T05:13:30.702796Zgeospatial_lon_min :-116.24217879897503geospatial_lon_max :-113.32307884940133geospatial_lat_min :58.3213119877029geospatial_lat_max :59.82415217044179left_first_longitude :-116.24217879897503left_first_latitude :58.75581670990796left_last_longitude :-115.40805937157408left_last_latitude :59.82415217044179right_first_longitude :-114.20750262227017right_first_latitude :58.3213119877029right_last_longitude :-113.32307884940133right_last_latitude :59.37343181849022xref_l2_hr_pixc_files :SWOT_L2_HR_PIXC_498_013_258L_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_259L_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_260L_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_261L_20230422T051330_20230422T051341_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_258R_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_259R_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_260R_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_261R_20230422T051330_20230422T051341_PIB0_01.ncxref_l2_hr_pixcvec_files :SWOT_L2_HR_PIXCVec_498_013_258L_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_259L_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_260L_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_261L_20230422T051330_20230422T051341_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_258R_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_259R_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_260R_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_261R_20230422T051330_20230422T051341_PIB0_01.ncxref_param_l2_hr_raster_file :SWOT_Param_L2_HR_Raster_20000101T000000_21000101T000000_20230321T100000_v301.rdfxref_reforbittrack_files :SWOT_RefOrbitTrackTileBoundary_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txt, SWOT_RefOrbitTrack125mPass1_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txt, SWOT_RefOrbitTrack125mPass2_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txtutm_zone_num :11mgrs_latitude_band :Vx_min :543800.0x_max :708900.0y_min :6467900.0y_max :6632900.0institution :JPLreferences :V1.0product_version :01\n\n\n\n\n\n\nds_raster.wse.hvplot.image(y='y', x='x')\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\nslc_results = earthaccess.search_data(short_name = 'SWOT_L1B_HR_SLC_1.1',\n                                       temporal = ('2023-04-22 00:00:00', '2023-04-22 23:59:59'), \n                                       granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013 with wildcards\n\nGranules found: 164\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=slc_results)\n\n# get link for file \nslc_link = earthaccess.results.DataGranule.data_links(slc_results[0], access='direct')[0]\n\ns3_file_obj6 = fs_s3.open(slc_link, mode='rb')\n\n\n\n\nThe L1B_HR_SLC product file contains five NetCDF data group called the slc, xfactor, noise, tvp, and grdem groups. More info can be found in the product description document within the dataset table for each group.\n\nds_SLC = xr.open_dataset(s3_file_obj6, group = 'slc', engine='h5netcdf')\nds_SLC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:      (num_lines: 17954, num_pixels: 4630, complex_depth: 2)\nDimensions without coordinates: num_lines, num_pixels, complex_depth\nData variables:\n    slc_plus_y   (num_lines, num_pixels, complex_depth) float32 ...\n    slc_minus_y  (num_lines, num_pixels, complex_depth) float32 ...\n    slc_qual     (num_lines) float32 ...\nAttributes:\n    description:  Single look complex images for plus_y and minus_y channelsxarray.DatasetDimensions:num_lines: 17954num_pixels: 4630complex_depth: 2Coordinates: (0)Data variables: (3)slc_plus_y(num_lines, num_pixels, complex_depth)float32...long_name :single look complex image for the plus_y channelunits :1valid_min :-1e+20valid_max :1e+20comment :SLC complex image for the plus_y channel (arbitrary scaling consistent with the X factor).[166254040 values with dtype=float32]slc_minus_y(num_lines, num_pixels, complex_depth)float32...long_name :single look complex image for the minus_y channelunits :1valid_min :-1e+20valid_max :1e+20comment :SLC complex image for the minus_y channel (arbitrary scaling consistent with the X factor).[166254040 values with dtype=float32]slc_qual(num_lines)float32...long_name :SLC quality flagstandard_name :status_flagflag_meanings :tvp_suspect sc_event_suspect small_karin_gap tvp_bad sc_event_bad large_karin_gapflag_masks :[  1   2   4  32  64 128]valid_min :0valid_max :231comment :Flag indicating conditions that may affect the quality of the SLC data.[17954 values with dtype=float32]Indexes: (0)Attributes: (1)description :Single look complex images for plus_y and minus_y channels"
  },
  {
    "objectID": "Tutorials/SWOTHR_s3Access_real_data_v11.html#accessing-and-visualizing-swot-datasets",
    "href": "Tutorials/SWOTHR_s3Access_real_data_v11.html#accessing-and-visualizing-swot-datasets",
    "title": "SWOT Hydrology Dataset Exploration in the Cloud",
    "section": "",
    "text": "This tutorial can only be run in an AWS cloud instance running in us-west-2: NASA Earthdata Cloud data in S3 can be directly accessed via earthaccess python library; this access is limited to requests made within the US West (Oregon) (code: us-west-2) AWS region.\n\n\n\n\nAccess SWOT HR data prodcuts (archived in NASA Earthdata Cloud) within the AWS cloud, without downloading to local machine\nVisualize accessed data for a quick check\n\n\n\n\nRiver Vector Shapefile - SWOT_L2_HR_RIVERSP_1.1\nLake Vector Shapefile - SWOT_L2_HR_LAKESP_1.1\nWater Mask Pixel Cloud NetCDF - SWOT_L2_HR_PIXC_1.1\nWater Mask Pixel Cloud Vector Attribute NetCDF - SWOT_L2_HR_PIXCVec_1.1\nRaster NetCDF - SWOT_L2_HR_Raster_1.1\nSingle Look Complex Data product - SWOT_L1B_HR_SLC_1.1\n\nNotebook Author: Cassie Nickles, NASA PO.DAAC (Aug 2023) || Other Contributors: Zoe Walschots (PO.DAAC Summer Intern 2023), Catalina Taglialatela (NASA PO.DAAC), Luis Lopez (NASA NSIDC DAAC)\nLast updated: 4 Dec 2023\n\n\n\n\n\nimport glob\nimport os\nimport requests\nimport s3fs\nimport fiona\nimport netCDF4 as nc\nimport h5netcdf\nimport xarray as xr\nimport pandas as pd\nimport geopandas as gpd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport hvplot.xarray\nimport earthaccess\nfrom earthaccess import Auth, DataCollections, DataGranules, Store\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAn Earthdata Login account is required to access data, as well as discover restricted data, from the NASA Earthdata system. Thus, to access NASA data, you need Earthdata Login. If you don’t already have one, please visit https://urs.earthdata.nasa.gov to register and manage your Earthdata Login account. This account is free to create and only takes a moment to set up. We use earthaccess to authenticate your login credentials below.\n\nauth = earthaccess.login()\n\nEARTHDATA_USERNAME and EARTHDATA_PASSWORD are not set in the current environment, try setting them or use a different strategy (netrc, interactive)\nYou're now authenticated with NASA Earthdata Login\nUsing token with expiration date: 01/07/2024\nUsing .netrc file for EDL\n\n\n\n\n\n\n\nThe s3 access link can be found using earthaccess data search. Since this collection consists of Reach and Node files, we need to extract only the granule for the Reach file. We do this by filtering for the ‘Reach’ title in the data link.\nAlternatively, Earthdata Search (see tutorial) can be used to search in a map graphic user interface.\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n\n\n\n#Retrieves granule from the day we want, in this case by passing to `earthdata.search_data` function the data collection shortname, temporal bounds, and for restricted data one must specify the search count\nriver_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_RIVERSP_1.1', \n                                        temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'),\n                                        granule_name = '*Reach*_013_NA*') # here we filter by Reach files (not node), pass #13 and continent code=NA\n\nGranules found: 14\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=river_results)\n\n\n\n\nThe native format for this data is a .zip file, and we want the .shp file within the .zip file, so we will create a Fiona AWS session using the credentials from setting up the s3fs session above to access the shapefiles within the zip files. If we don’t do this, the alternative would be to download the data to the cloud environment (e.g. EC2 instance, user S3 bucket) and extract the .zip file there.\n\nfiona_session=fiona.session.AWSSession(\n        aws_access_key_id=fs_s3.storage_options[\"key\"],\n        aws_secret_access_key=fs_s3.storage_options[\"secret\"],\n        aws_session_token=fs_s3.storage_options[\"token\"]\n    )\n\n\n# Get the link for the first zip file\nriver_link = earthaccess.results.DataGranule.data_links(river_results[0], access='direct')[0]\n\n# We use the zip+ prefix so fiona knows that we are operating on a zip file\nriver_shp_url = f\"zip+{river_link}\"\n\nwith fiona.Env(session=fiona_session):\n    SWOT_HR_shp1 = gpd.read_file(river_shp_url) \n\n#view the attribute table\nSWOT_HR_shp1 \n\n\n\n\n\n\n\n\nreach_id\ntime\ntime_tai\ntime_str\np_lat\np_lon\nriver_name\nwse\nwse_u\nwse_r_u\n...\np_wid_var\np_n_nodes\np_dist_out\np_length\np_maf\np_dam_id\np_n_ch_max\np_n_ch_mod\np_low_slp\ngeometry\n\n\n\n\n0\n77460000013\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.621824\n-124.244823\nEel River\n2.320100e+00\n9.653000e-02\n3.490000e-02\n...\n23702.805\n96\n19376.986\n19194.609276\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-124.29069 40.66364, -124.29104 40...\n\n\n1\n77460000021\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.542406\n-124.156177\nEel River\n9.248800e+00\n9.071000e-02\n1.130000e-02\n...\n3435.524\n51\n29478.836\n10101.849934\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-124.16119 40.58421, -124.16097 40...\n\n\n2\n77460000031\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.494638\n-124.107178\nEel River\n1.970160e+01\n5.754600e-01\n5.683800e-01\n...\n1202.549\n50\n39553.707\n10074.871060\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-124.13864 40.50871, -124.13829 40...\n\n\n3\n77460000041\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.447111\n-124.021272\nEel River\n3.471650e+01\n1.486718e+01\n1.486691e+01\n...\n645.984\n81\n55843.425\n16289.718636\n-1.000000e+12\n0\n1\n1\n0\nLINESTRING (-124.09611 40.46269, -124.09575 40...\n\n\n4\n77460000051\n7.342535e+08\n7.342536e+08\n2023-04-08T07:18:42Z\n40.395990\n-123.930243\nEel River\n3.229870e+01\n9.148000e-02\n1.638000e-02\n...\n1532.658\n51\n66073.910\n10230.484650\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-123.95755 40.42295, -123.95719 40...\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n355\n78322900143\n-1.000000e+12\n-1.000000e+12\nno_data\n50.998910\n-119.011806\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n116183.841\n15\n59585.535\n2935.007230\n-1.000000e+12\n0\n1\n1\n0\nLINESTRING (-119.03134 51.00406, -119.03105 51...\n\n\n356\n78322900153\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:51Z\n51.047442\n-119.042215\nno_data\n3.451806e+02\n1.114110e+00\n1.110470e+00\n...\n41059.043\n51\n30434.699\n10168.113068\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-119.03140 51.09147, -119.03165 51...\n\n\n357\n78322900173\n-1.000000e+12\n-1.000000e+12\nno_data\n50.916115\n-119.036919\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n186564.361\n98\n39488.857\n19642.879384\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-118.99201 50.99421, -118.99200 50...\n\n\n358\n78322900183\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:52Z\n51.060235\n-118.938606\nno_data\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n177029.325\n86\n56650.527\n17161.670624\n-1.000000e+12\n0\n4\n1\n0\nLINESTRING (-118.99200 50.99394, -118.99201 50...\n\n\n359\n78322900211\n-1.000000e+12\n-1.000000e+12\nno_data\n50.549433\n-119.062048\nShuswap River\n-1.000000e+12\n-1.000000e+12\n-1.000000e+12\n...\n122.690\n50\n103956.987\n10074.432813\n-1.000000e+12\n0\n2\n1\n0\nLINESTRING (-119.11242 50.54684, -119.11207 50...\n\n\n\n\n360 rows × 127 columns\n\n\n\n\n\n\n\n# Simple plot\nfig, ax = plt.subplots(figsize=(7,5))\nSWOT_HR_shp1.plot(ax=ax, color='black')\n\n&lt;Axes: &gt;\n\n\n\n\n\n\n# # Another way to plot geopandas dataframes is with `explore`, which also plots a basemap\n# SWOT_HR_shp1.explore()\n\n\n\n\nThe lake vector shapefiles can be accessed in the same way as the river shapefiles above.\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n\n\n\nlake_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_LAKESP_1.1', \n                                       temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'),\n                                       granule_name = '*Obs*_013_NA*') # here we filter by files with 'Obs' in the name (This collection has three options: Obs, Unassigned, and Prior), pass #13 and continent code=NA\n\nGranules found: 14\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=lake_results)\n\n\n\n\nThe native format for this data is a .zip file, and we want the .shp file within the .zip file, so we will create a Fiona AWS session using the credentials from setting up the s3fs session above to access the shapefiles within the zip files. If we don’t do this, the alternative would be to download the data to the cloud environment (e.g. EC2 instance, user S3 bucket) and extract the .zip file there.\n\nfiona_session=fiona.session.AWSSession(\n        aws_access_key_id=fs_s3.storage_options[\"key\"],\n        aws_secret_access_key=fs_s3.storage_options[\"secret\"],\n        aws_session_token=fs_s3.storage_options[\"token\"]\n    )\n\n\n# Get the link for the first zip file\nlake_link = earthaccess.results.DataGranule.data_links(lake_results[0], access='direct')[0]\n\n# We use the zip+ prefix so fiona knows that we are operating on a zip file\nlake_shp_url = f\"zip+{lake_link}\"\n\nwith fiona.Env(session=fiona_session):\n    SWOT_HR_shp2 = gpd.read_file(lake_shp_url) \n\n#view the attribute table\nSWOT_HR_shp2\n\n\n\n\n\n\n\n\nobs_id\nlake_id\noverlap\nn_overlap\nreach_id\ntime\ntime_tai\ntime_str\nwse\nwse_u\n...\nload_tidef\nload_tideg\npole_tide\ndry_trop_c\nwet_trop_c\niono_c\nxovr_cal_c\nlake_name\np_res_id\ngeometry\n\n\n\n\n0\n781229R000006\n7810001133\n85\n1\nno_data\n7.342536e+08\n7.342536e+08\n2023-04-08T07:19:21Z\n593.993\n0.011\n...\n-0.019138\n-0.018407\n-0.002311\n-2.164411\n-0.074947\n-0.003339\n-1.000000e+12\nAPPLEGATE RESERVOIR;APPLEGATE LAKE\n116\nMULTIPOLYGON (((-123.10728 42.03437, -123.1073...\n\n\n1\n782232R000018\n7820002572;7820002253\n86;80\n2\nno_data\n7.342536e+08\n7.342536e+08\n2023-04-08T07:19:51Z\n439.811\n0.167\n...\n-0.016663\n-0.016105\n-0.002303\n-2.199668\n-0.069287\n-0.003153\n-1.000000e+12\nHILLS CREEK RESERVOIR\n-99999999\nMULTIPOLYGON (((-122.45387 43.68914, -122.4539...\n\n\n2\n782243R000013\n7820039162\n10\n1\nno_data\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:40Z\n341.457\n0.003\n...\n-0.009852\n-0.009920\n-0.002187\n-2.211506\n-0.079803\n-0.002515\n-1.000000e+12\nWHITEMAN CREEK;OKANAGAN LAKE;OKANAGAN\n-99999999\nMULTIPOLYGON (((-119.72285 49.72639, -119.7227...\n\n\n3\n782243R015586\n7820039162\n17\n1\nno_data\n7.342537e+08\n7.342537e+08\n2023-04-08T07:21:48Z\n341.513\n0.028\n...\n-0.009454\n-0.009599\n-0.002172\n-2.209661\n-0.079193\n-0.002491\n-1.000000e+12\nWHITEMAN CREEK;OKANAGAN LAKE;OKANAGAN\n-99999999\nMULTIPOLYGON (((-119.49606 50.06182, -119.4961...\n\n\n4\n783245R000005\n7830263943\n32\n1\n78322700063;78322700091;78322800011;7832290001...\n7.342537e+08\n7.342537e+08\n2023-04-08T07:22:01Z\n344.832\n0.014\n...\n-0.009029\n-0.009206\n-0.002157\n-2.207273\n-0.082830\n-0.002465\n-1.000000e+12\nROSS CREEK;EAGLE RIVER;SHUSWAP;LITTLE RIVER;SC...\n-99999999\nMULTIPOLYGON (((-119.35814 50.94441, -119.3580...\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n831\n783246R009013\n7830249372;7830249352\n81;71\n2\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:13Z\n1837.232\n0.563\n...\n-0.008546\n-0.008791\n-0.002133\n-2.094712\n-0.066065\n-0.002440\n-1.000000e+12\nno_data\n-99999999\nMULTIPOLYGON (((-118.98292 51.59811, -118.9830...\n\n\n832\n783246R009931\n7830249332\n87\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n1635.514\n0.325\n...\n-0.008539\n-0.008785\n-0.002132\n-2.136184\n-0.071612\n-0.002440\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.98463 51.61215, -118.98453 51.6...\n\n\n833\n783246R010740\n7830243082\n82\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n2094.295\n5.792\n...\n-0.008558\n-0.008815\n-0.002135\n-1.942940\n-0.048756\n-0.002438\n-1.000000e+12\nno_data\n-99999999\nMULTIPOLYGON (((-119.07615 51.67504, -119.0759...\n\n\n834\n783246R010910\n7830256902\n21\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:14Z\n1996.670\n0.303\n...\n-0.008524\n-0.008775\n-0.002132\n-1.863152\n-0.041920\n-0.002443\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.97489 51.63692, -118.97478 51.6...\n\n\n835\n782246R012796\n7820071012\n75\n1\nno_data\n7.342537e+08\n7.342538e+08\n2023-04-08T07:22:15Z\n1962.504\n0.385\n...\n-0.008469\n-0.008730\n-0.002128\n-2.104326\n-0.068847\n-0.002438\n-1.000000e+12\nno_data\n-99999999\nPOLYGON ((-118.88701 51.66364, -118.88710 51.6...\n\n\n\n\n836 rows × 36 columns\n\n\n\n\n\n\n\nfig, ax = plt.subplots(figsize=(7,5))\nSWOT_HR_shp2.plot(ax=ax, color='black')\n\n&lt;Axes: &gt;\n\n\n\n\n\nAccessing the remaining files is different than the shp files above. We do not need to read the shapefiles within a zip file using something like Fiona session (or to download and unzip in the cloud) because the following SWOT HR collections are stored in netCDF files in the cloud. For the rest of the products, we will open via xarray, not geopandas.\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\npixc_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_PIXC_1.1',\n                                       temporal = ('2023-04-22 00:00:00', '2023-04-22 23:59:59'), \n                                       granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013                                       \n\nGranules found: 164\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=pixc_results)\n\n# get link for file 100\npixc_link = earthaccess.results.DataGranule.data_links(pixc_results[100], access='direct')[0]\n\ns3_file_obj3 = fs_s3.open(pixc_link, mode='rb')\n\n\n\n\nThe pixel cloud netCDF files are formatted with three groups titled, “pixel cloud”, “tvp”, or “noise” (more detail here). In order to access the coordinates and variables within the file, a group must be specified when calling xarray open_dataset.\n\nds_PIXC = xr.open_dataset(s3_file_obj3, group = 'pixel_cloud', engine='h5netcdf')\nds_PIXC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:                                (points: 5180594, complex_depth: 2,\n                                            num_pixc_lines: 3239)\nCoordinates:\n    latitude                               (points) float64 ...\n    longitude                              (points) float64 ...\nDimensions without coordinates: points, complex_depth, num_pixc_lines\nData variables: (12/57)\n    azimuth_index                          (points) float64 ...\n    range_index                            (points) float64 ...\n    interferogram                          (points, complex_depth) float32 ...\n    power_plus_y                           (points) float32 ...\n    power_minus_y                          (points) float32 ...\n    coherent_power                         (points) float32 ...\n    ...                                     ...\n    interferogram_qual                     (points) float64 ...\n    classification_qual                    (points) float64 ...\n    geolocation_qual                       (points) float64 ...\n    sig0_qual                              (points) float64 ...\n    pixc_line_qual                         (num_pixc_lines) float64 ...\n    pixc_line_to_tvp                       (num_pixc_lines) float32 ...\nAttributes:\n    description:                 cloud of geolocated interferogram pixels\n    interferogram_size_azimuth:  3239\n    interferogram_size_range:    5526\n    looks_to_efflooks:           1.5309342049156023\n    num_azimuth_looks:           7.0\n    azimuth_offset:              3xarray.DatasetDimensions:points: 5180594complex_depth: 2num_pixc_lines: 3239Coordinates: (2)latitude(points)float64...long_name :latitude (positive N, negative S)standard_name :latitudeunits :degrees_northquality_flag :geolocation_qualvalid_min :-80.0valid_max :80.0comment :Geodetic latitude [-80,80] (degrees north of equator) of the pixel.[5180594 values with dtype=float64]longitude(points)float64...long_name :longitude (degrees East)standard_name :longitudeunits :degrees_eastquality_flag :geolocation_qualvalid_min :-180.0valid_max :180.0comment :Longitude [-180,180) (east of the Greenwich meridian) of the pixel.[5180594 values with dtype=float64]Data variables: (57)azimuth_index(points)float64...long_name :rare interferogram azimuth indexunits :1valid_min :0valid_max :999999comment :Rare interferogram azimuth index (indexed from 0).[5180594 values with dtype=float64]range_index(points)float64...long_name :rare interferogram range indexunits :1valid_min :0valid_max :999999comment :Rare interferogram range index (indexed from 0).[5180594 values with dtype=float64]interferogram(points, complex_depth)float32...long_name :rare interferogramunits :1quality_flag :interferogram_qualvalid_min :-1e+20valid_max :1e+20comment :Complex unflattened rare interferogram.[10361188 values with dtype=float32]power_plus_y(points)float32...long_name :power for plus_y channelunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power for the plus_y channel (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]power_minus_y(points)float32...long_name :power for minus_y channelunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power for the minus_y channel (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]coherent_power(points)float32...long_name :coherent power combination of minus_y and plus_y channelsunits :1quality_flag :interferogram_qualvalid_min :0.0valid_max :1e+20comment :Power computed by combining the plus_y and minus_y channels coherently by co-aligning the phases (arbitrary units that give sigma0 when noise subtracted and normalized by the X factor).[5180594 values with dtype=float32]x_factor_plus_y(points)float32...long_name :X factor for plus_y channel powerunits :1valid_min :0.0valid_max :1e+20comment :X factor for the plus_y channel power in linear units (arbitrary units to normalize noise-subtracted power to sigma0).[5180594 values with dtype=float32]x_factor_minus_y(points)float32...long_name :X factor for minus_y channel powerunits :1valid_min :0.0valid_max :1e+20comment :X factor for the minus_y channel power in linear units (arbitrary units to normalize noise-subtracted power to sigma0).[5180594 values with dtype=float32]water_frac(points)float32...long_name :water fractionunits :1quality_flag :classification_qualvalid_min :-1000.0valid_max :10000.0comment :Noisy estimate of the fraction of the pixel that is water.[5180594 values with dtype=float32]water_frac_uncert(points)float32...long_name :water fraction uncertaintyunits :1valid_min :0.0valid_max :999999.0comment :Uncertainty estimate of the water fraction estimate (width of noisy water frac estimate distribution).[5180594 values with dtype=float32]classification(points)float32...long_name :classificationquality_flag :classification_qualflag_meanings :land land_near_water water_near_land open_water dark_water low_coh_water_near_land open_low_coh_waterflag_values :[1 2 3 4 5 6 7]valid_min :1valid_max :7comment :Flags indicating water detection results.[5180594 values with dtype=float32]false_detection_rate(points)float32...long_name :false detection rateunits :1quality_flag :classification_qualvalid_min :0.0valid_max :1.0comment :Probability of falsely detecting water when there is none.[5180594 values with dtype=float32]missed_detection_rate(points)float32...long_name :missed detection rateunits :1quality_flag :classification_qualvalid_min :0.0valid_max :1.0comment :Probability of falsely detecting no water when there is water.[5180594 values with dtype=float32]prior_water_prob(points)float32...long_name :prior water probabilityunits :1valid_min :0.0valid_max :1.0comment :Prior probability of water occurring.[5180594 values with dtype=float32]bright_land_flag(points)float32...long_name :bright land flagstandard_name :status_flagflag_meanings :not_bright_land bright_land bright_land_or_waterflag_values :[0 1 2]valid_min :0valid_max :2comment :Flag indicating areas that are not typically water but are expected to be bright (e.g., urban areas, ice).  Flag value 2 indicates cases where prior data indicate land, but where prior_water_prob indicates possible water.[5180594 values with dtype=float32]layover_impact(points)float32...long_name :layover impactunits :mvalid_min :-999999.0valid_max :999999.0comment :Estimate of the height error caused by layover, which may not be reliable on a pixel by pixel basis, but may be useful to augment aggregated height uncertainties.[5180594 values with dtype=float32]eff_num_rare_looks(points)float32...long_name :effective number of rare looksunits :1valid_min :0.0valid_max :999999.0comment :Effective number of independent looks taken to form the rare interferogram.[5180594 values with dtype=float32]height(points)float32...long_name :height above reference ellipsoidunits :mquality_flag :geolocation_qualvalid_min :-1500.0valid_max :15000.0comment :Height of the pixel above the reference ellipsoid.[5180594 values with dtype=float32]cross_track(points)float32...long_name :approximate cross-track locationunits :mquality_flag :geolocation_qualvalid_min :-75000.0valid_max :75000.0comment :Approximate cross-track location of the pixel.[5180594 values with dtype=float32]pixel_area(points)float32...long_name :pixel areaunits :m^2quality_flag :geolocation_qualvalid_min :0.0valid_max :999999.0comment :Pixel area.[5180594 values with dtype=float32]inc(points)float32...long_name :incidence angleunits :degreesquality_flag :geolocation_qualvalid_min :0.0valid_max :999999.0comment :Incidence angle.[5180594 values with dtype=float32]phase_noise_std(points)float32...long_name :phase noise standard deviationunits :radiansvalid_min :-999999.0valid_max :999999.0comment :Estimate of the phase noise standard deviation.[5180594 values with dtype=float32]dlatitude_dphase(points)float32...long_name :sensitivity of latitude estimate to interferogram phaseunits :degrees/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the latitude estimate to the interferogram phase.[5180594 values with dtype=float32]dlongitude_dphase(points)float32...long_name :sensitivity of longitude estimate to interferogram phaseunits :degrees/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the longitude estimate to the interferogram phase.[5180594 values with dtype=float32]dheight_dphase(points)float32...long_name :sensitivity of height estimate to interferogram phaseunits :m/radianquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the interferogram phase.[5180594 values with dtype=float32]dheight_droll(points)float32...long_name :sensitivity of height estimate to spacecraft rollunits :m/degreesquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the spacecraft roll.[5180594 values with dtype=float32]dheight_dbaseline(points)float32...long_name :sensitivity of height estimate to interferometric baselineunits :m/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the interferometric baseline.[5180594 values with dtype=float32]dheight_drange(points)float32...long_name :sensitivity of height estimate to range (delay)units :m/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the height estimate to the range (delay).[5180594 values with dtype=float32]darea_dheight(points)float32...long_name :sensitivity of pixel area to reference heightunits :m^2/mquality_flag :geolocation_qualvalid_min :-999999.0valid_max :999999.0comment :Sensitivity of the pixel area to the reference height.[5180594 values with dtype=float32]illumination_time(points)datetime64[ns]...long_name :time of illumination of each pixel (UTC)standard_name :timetai_utc_difference :37.0leap_second :0000-00-00T00:00:00Zcomment :Time of measurement in seconds in the UTC time scale since 1 Jan 2000 00:00:00 UTC. [tai_utc_difference] is the difference between TAI and UTC reference time (seconds) for the first measurement of the data set. If a leap second occurs within the data set, the attribute leap_second is set to the UTC time at which the leap second occurs.[5180594 values with dtype=datetime64[ns]]illumination_time_tai(points)datetime64[ns]...long_name :time of illumination of each pixel (TAI)standard_name :timecomment :Time of measurement in seconds in the TAI time scale since 1 Jan 2000 00:00:00 TAI. This time scale contains no leap seconds. The difference (in seconds) with time in UTC is given by the attribute [illumination_time:tai_utc_difference].[5180594 values with dtype=datetime64[ns]]eff_num_medium_looks(points)float32...long_name :effective number of medium looksunits :1valid_min :0.0valid_max :999999.0comment :Effective number of independent looks taken in forming the medium interferogram (after adaptive averaging).[5180594 values with dtype=float32]sig0(points)float32...long_name :sigma0units :1quality_flag :sig0_qualvalid_min :-999999.0valid_max :999999.0comment :Normalized radar cross section (sigma0) in real, linear units (not decibels). The value may be negative due to noise subtraction.[5180594 values with dtype=float32]sig0_uncert(points)float32...long_name :sigma0 uncertaintyunits :1valid_min :-999999.0valid_max :999999.0comment :1-sigma uncertainty in the sig0 measurement.  The value is given as an additive (not multiplicative) linear term (not a term in decibels).[5180594 values with dtype=float32]phase_unwrapping_region(points)float64...long_name :phase unwrapping region indexunits :1valid_min :-1valid_max :99999999comment :Phase unwrapping region index.[5180594 values with dtype=float64]ambiguity_cost1(points)float32...long_name :phase ambiguity minimum costunits :1valid_min :-999999.0valid_max :999999.0comment :Phase ambiguity minimum cost.[5180594 values with dtype=float32]ambiguity_cost2(points)float32...long_name :phase ambiguity 2nd minimum costunits :1valid_min :-999999.0valid_max :999999.0comment :Phase ambiguity 2nd minimum cost.[5180594 values with dtype=float32]instrument_range_cor(points)float32...long_name :instrument range correctionunits :mvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to range before geolocation.[5180594 values with dtype=float32]instrument_phase_cor(points)float32...long_name :instrument phase correctionunits :radiansvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to phase before geolocation.[5180594 values with dtype=float32]instrument_baseline_cor(points)float32...long_name :instrument baseline correctionunits :mvalid_min :-999999.0valid_max :999999.0comment :Term that incorporates all calibration corrections applied to baseline before geolocation.[5180594 values with dtype=float32]sig0_cor_atmos_model(points)float32...long_name :two-way atmospheric correction to sigma0 from modelsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :1valid_min :1.0valid_max :10.0comment :Atmospheric correction to sigma0 from weather model data as a linear power multiplier (not decibels). sig0_cor_atmos_model is already applied in computing sig0 and x_factor_plus_y and x_factor_minus_y.[5180594 values with dtype=float32]height_cor_xover(points)float32...long_name :height correction from KaRIn crossoversunits :mvalid_min :-10.0valid_max :10.0comment :Height correction from KaRIn crossover calibration. The correction is applied before geolocation but reported as an equivalent height correction.[5180594 values with dtype=float32]model_dry_tropo_cor(points)float32...long_name :dry troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :mvalid_min :-3.0valid_max :-1.5comment :Equivalent vertical correction due to dry troposphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]model_wet_tropo_cor(points)float32...long_name :wet troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFunits :mvalid_min :-1.0valid_max :0.0comment :Equivalent vertical correction due to wet troposphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]iono_cor_gim_ka(points)float32...long_name :ionosphere vertical correctionsource :Global Ionosphere Mapsinstitution :JPLunits :mvalid_min :-0.5valid_max :0.0comment :Equivalent vertical correction due to ionosphere delay. The reported pixel height, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported pixel height results in the uncorrected pixel height.[5180594 values with dtype=float32]geoid(points)float32...long_name :geoid heightstandard_name :geoid_height_above_reference_ellipsoidsource :EGM2008 (Pavlis et al., 2012)units :mvalid_min :-150.0valid_max :150.0comment :Geoid height above the reference ellipsoid with a correction to refer the value to the mean tide system, i.e. includes the permanent tide (zero frequency).  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]solid_earth_tide(points)float32...long_name :solid Earth tide heightsource :Cartwright and Taylor (1971) and Cartwright and Edden (1973)units :mvalid_min :-1.0valid_max :1.0comment :Solid-Earth (body) tide height. The zero-frequency permanent tide component is not included.  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]load_tide_fes(points)float32...long_name :geocentric load tide height (FES)source :FES2014b (Carrere et al., 2016)institution :LEGOS/CNESunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth's crust. This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]load_tide_got(points)float32...long_name :geocentric load tide height (GOT)source :GOT4.10c (Ray, 2013)institution :GSFCunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth's crust. This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]pole_tide(points)float32...long_name :geocentric pole tide heightsource :Wahr (1985) and Desai et al. (2015)units :mvalid_min :-0.2valid_max :0.2comment :Geocentric pole tide height. The total of the contribution from the solid-Earth (body) pole tide height and the load pole tide height (i.e., the effect of the ocean pole tide loading of the Earth's crust).  This value is reported for reference but is not applied to the reported height.[5180594 values with dtype=float32]ancillary_surface_classification_flag(points)float32...long_name :surface classificationstandard_name :status_flagsource :MODIS/GlobCoverinstitution :European Space Agencyflag_meanings :open_ocean land continental_water aquatic_vegetation continental_ice_snow floating_ice salted_basinflag_values :[0 1 2 3 4 5 6]valid_min :0valid_max :6comment :7-state surface type classification computed from a mask built with MODIS and GlobCover data.[5180594 values with dtype=float32]interferogram_qual(points)float64...standard_name :status_flagflag_meanings :rare_power_suspect rare_phase_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded rare_power_bad rare_phase_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[      2048       4096       8192      16384      32768     262144\n     524288  134217728  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4161599488comment :Quality flag for the interferogram quantities in the pixel cloud data[5180594 values with dtype=float64]classification_qual(points)float64...standard_name :status_flagflag_meanings :no_coherent_gain power_close_to_noise_floor detected_water_but_no_prior_water detected_water_but_bright_land water_false_detection_rate_suspect coherent_power_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded coherent_power_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8         16       2048\n       8192      16384      32768     262144     524288  134217728\n  536870912 1073741824 2147483648]valid_min :0valid_max :3893159967comment :Quality flag for the classification quantities in the pixel cloud data[5180594 values with dtype=float64]geolocation_qual(points)float64...standard_name :status_flagflag_meanings :layover_significant phase_noise_suspect phase_unwrapping_suspect model_dry_tropo_cor_suspect model_wet_tropo_cor_suspect iono_cor_gim_ka_suspect xovercal_suspect medium_phase_suspect tvp_suspect sc_event_suspect small_karin_gap specular_ringing_degraded model_dry_tropo_cor_missing model_wet_tropo_cor_missing iono_cor_gim_ka_missing xovercal_missing geolocation_is_from_refloc no_geolocation_bad medium_phase_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8         16         32\n         64       4096       8192      16384      32768     524288\n    1048576    2097152    4194304    8388608   16777216  134217728\n  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4193841279comment :Quality flag for the geolocation quantities in the pixel cloud data[5180594 values with dtype=float64]sig0_qual(points)float64...standard_name :status_flagflag_meanings :sig0_uncert_suspect sig0_cor_atmos_suspect noise_power_suspect xfactor_suspect rare_power_suspect tvp_suspect sc_event_suspect small_karin_gap in_air_pixel_degraded specular_ringing_degraded sig0_cor_atmos_missing noise_power_bad xfactor_bad rare_power_bad tvp_bad sc_event_bad large_karin_gapflag_masks :[         1          2          4          8       2048       8192\n      16384      32768     262144     524288    1048576   33554432\n   67108864  134217728  536870912 1073741824 2147483648]valid_min :0valid_max :3994871823comment :Quality flag for sig0[5180594 values with dtype=float64]pixc_line_qual(num_pixc_lines)float64...standard_name :status_flagflag_meanings :not_in_tile tvp_suspect sc_event_suspect small_karin_gap tvp_bad sc_event_bad large_karin_gapflag_masks :[         1       8192      16384      32768  536870912 1073741824\n 2147483649]valid_min :0valid_max :3758153729comment :Quality flag for pixel cloud data per rare-posted interferogram line (similar to slc_qual in the L1B_HR_SLC product)[3239 values with dtype=float64]pixc_line_to_tvp(num_pixc_lines)float32...long_name :pixel cloud rare line to tvp indexunits :1valid_min :0.0valid_max :999999.0comment :Pixel cloud rare radar grid line index to tvp index mapping[3239 values with dtype=float32]Indexes: (0)Attributes: (6)description :cloud of geolocated interferogram pixelsinterferogram_size_azimuth :3239interferogram_size_range :5526looks_to_efflooks :1.5309342049156023num_azimuth_looks :7.0azimuth_offset :3\n\n\n\n\n\n\n# This could take a few minutes to plot\nplt.scatter(x=ds_PIXC.longitude, y=ds_PIXC.latitude, c=ds_PIXC.height)\nplt.colorbar().set_label('Height (m)')\n\n\n\n\n\n\n\n\n\n\n\npixcvec_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_PIXCVEC_1.1', \n                                          temporal = ('2023-04-08 00:00:00', '2023-04-22 23:59:59'), \n                                          granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013 \n\nGranules found: 100\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=pixcvec_results)\n\n# get link for file 0\npixcvec_link = earthaccess.results.DataGranule.data_links(pixcvec_results[0], access='direct')[0]\n\ns3_file_obj4 = fs_s3.open(pixcvec_link, mode='rb')\n\n\n\n\n\nds_PIXCVEC = xr.open_dataset(s3_file_obj4, decode_cf=False,  engine='h5netcdf')\nds_PIXCVEC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:               (points: 11174047, nchar_reach_id: 11,\n                           nchar_node_id: 14, nchar_lake_id: 10,\n                           nchar_obs_id: 13)\nDimensions without coordinates: points, nchar_reach_id, nchar_node_id,\n                                nchar_lake_id, nchar_obs_id\nData variables:\n    azimuth_index         (points) int32 ...\n    range_index           (points) int32 ...\n    latitude_vectorproc   (points) float64 ...\n    longitude_vectorproc  (points) float64 ...\n    height_vectorproc     (points) float32 ...\n    reach_id              (points, nchar_reach_id) |S1 ...\n    node_id               (points, nchar_node_id) |S1 ...\n    lake_id               (points, nchar_lake_id) |S1 ...\n    obs_id                (points, nchar_obs_id) |S1 ...\n    ice_clim_f            (points) int8 ...\n    ice_dyn_f             (points) int8 ...\nAttributes: (12/45)\n    Conventions:                     CF-1.7\n    title:                           Level 2 KaRIn high rate pixel cloud vect...\n    short_name:                      L2_HR_PIXCVec\n    institution:                     JPL\n    source:                          Level 1B KaRIn High Rate Single Look Com...\n    history:                         2023-09-07T04:43:11.652934Z: Creation\n    ...                              ...\n    xref_prior_river_db_file:        \n    xref_prior_lake_db_file:         SWOT_LakeDatabase_Cal_013_20000101T00000...\n    xref_reforbittrack_files:        SWOT_RefOrbitTrackTileBoundary_Cal_20000...\n    xref_param_l2_hr_laketile_file:  SWOT_Param_L2_HR_LakeTile_20000101T00000...\n    ellipsoid_semi_major_axis:       6378137.0\n    ellipsoid_flattening:            0.0033528106647474805xarray.DatasetDimensions:points: 11174047nchar_reach_id: 11nchar_node_id: 14nchar_lake_id: 10nchar_obs_id: 13Coordinates: (0)Data variables: (11)azimuth_index(points)int32..._FillValue :2147483647long_name :rare interferogram azimuth indexunits :1valid_min :0valid_max :999999coordinates :longitude_vectorproc latitude_vectorproccomment :Rare interferogram azimuth index (indexed from 0).[11174047 values with dtype=int32]range_index(points)int32..._FillValue :2147483647long_name :rare interferogram range indexunits :1valid_min :0valid_max :999999coordinates :longitude_vectorproc latitude_vectorproccomment :Rare interferogram range index (indexed from 0).[11174047 values with dtype=int32]latitude_vectorproc(points)float64..._FillValue :9.969209968386869e+36long_name :height-constrained geolocation latitudestandard_name :latitudeunits :degrees_northvalid_min :-80.0valid_max :80.0comment :Height-constrained geodetic latitude of the pixel. Units are in degrees north of the equator.[11174047 values with dtype=float64]longitude_vectorproc(points)float64..._FillValue :9.969209968386869e+36long_name :height-constrained geolocation longitudestandard_name :longitudeunits :degrees_eastvalid_min :-180.0valid_max :180.0comment :Height-constrained geodetic longitude of the pixel. Positive=degrees east of the Greenwich meridian. Negative=degrees west of the Greenwich meridian.[11174047 values with dtype=float64]height_vectorproc(points)float32..._FillValue :9.96921e+36long_name :height above reference ellipsoidunits :mvalid_min :-1500.0valid_max :15000.0coordinates :longitude_vectorproc latitude_vectorproccomment :Height-constrained height of the pixel above the reference ellipsoid.[11174047 values with dtype=float32]reach_id(points, nchar_reach_id)|S1...long_name :identifier of the associated prior river reachcoordinates :longitude_vectorproc latitude_vectorproccomment :Unique reach identifier from the prior river database. The format of the identifier is CBBBBBRRRRT, where C=continent, B=basin, R=reach, T=type.[122914517 values with dtype=|S1]node_id(points, nchar_node_id)|S1...long_name :identifier of the associated prior river nodecoordinates :longitude_vectorproc latitude_vectorproccomment :Unique node identifier from the prior river database. The format of the identifier is CBBBBBRRRRNNNT, where C=continent, B=basin, R=reach, N=node, T=type of water body.[156436658 values with dtype=|S1]lake_id(points, nchar_lake_id)|S1...long_name :identifier of the associated prior lakecoordinates :longitude_vectorproc latitude_vectorproccomment :Identifier of the lake from the lake prior database) associated to the pixel. The format of the identifier is CBBNNNNNNT, where C=continent, B=basin, N=counter within the basin, T=type of water body.[111740470 values with dtype=|S1]obs_id(points, nchar_obs_id)|S1...long_name :identifier of the observed featurecoordinates :longitude_vectorproc latitude_vectorproccomment :Tile-specific identifier of the observed feature associated to the pixel. The format of the identifier is CBBTTTSNNNNNN, where C=continent, B=basin, T=tile number, S=swath side, N=lake counter within the PIXC tile.[145262611 values with dtype=|S1]ice_clim_f(points)int8..._FillValue :127long_name :climatological ice cover flagflag_meanings :no_ice_cover uncertain_ice_cover full_ice_coverflag_values :[0 1 2]institution :University of North Carolinacoordinates :longitude_vectorproc latitude_vectorproccomment :Climatological ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on external climatological information (not the SWOT measurement). Values of 0, 1, and 2 indicate that the surface is not ice covered, may or may not be partially or fully ice covered, and fully ice covered, respectively. A value of 127 indicates that this flag is not available.[11174047 values with dtype=int8]ice_dyn_f(points)int8..._FillValue :127long_name :dynamical ice cover flagflag_meanings :no_ice_cover partial_ice_cover full_ice_coverflag_values :[0 1 2]institution :University of North Carolinacoordinates :longitude_vectorproc latitude_vectorproccomment :Dynamic ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on analysis of external satellite optical data. Values of 0, 1, and 2 indicate that the surface is not ice covered, partially ice covered, and fully ice covered, respectively. A value of 255 indicates that this flag is not available.[11174047 values with dtype=int8]Indexes: (0)Attributes: (45)Conventions :CF-1.7title :Level 2 KaRIn high rate pixel cloud vector attribute productshort_name :L2_HR_PIXCVecinstitution :JPLsource :Level 1B KaRIn High Rate Single Look Complex Data Producthistory :2023-09-07T04:43:11.652934Z: Creationplatform :SWOTreferences :SWOT-DD-CDM-0565-CNES_SAS_Design_L2_HR_LakeSP - Revision A - 20220531reference_document :SWOT-TN-CDM-0677-CNES_Product_Description_L2_HR_PIXCVec - Revision A - 20220531product_version :V5.2.0crid :PIB0pge_name :PGE_L2_HR_LakeSPpge_version :V4.2.0contact :SWOT-contact@cnes.frcycle_number :498pass_number :13tile_number :223swath_side :Rtile_name :013_223Rcontinent_id :NAcontinent_code :7time_granule_start :2023-04-22T05:07:12.471771Ztime_granule_end :2023-04-22T05:07:23.493987Ztime_coverage_start :2023-04-22T05:07:13.018824Ztime_coverage_end :2023-04-22T05:07:22.948748Zgeospatial_lon_min :-124.56790968330785geospatial_lon_max :-123.63542466025933geospatial_lat_min :38.55706990508294geospatial_lat_max :39.315223768521015inner_first_longitude :-124.56790968330785inner_first_latitude :38.69222477165863inner_last_longitude :-124.38372359338888inner_last_latitude :39.315223768521015outer_first_longitude :-123.82494326341896outer_first_latitude :38.55706990508294outer_last_longitude :-123.63542466025933outer_last_latitude :39.17838265794308xref_l2_hr_pixc_file :SWOT_L2_HR_PIXC_498_013_223R_20230422T050712_20230422T050723_PIB0_01.ncxref_l2_hr_pixcvecriver_file :SWOT_L2_HR_PIXCVecRiver_498_013_223R_20230422T050712_20230422T050723_PIB0_01.ncxref_prior_river_db_file :xref_prior_lake_db_file :SWOT_LakeDatabase_Cal_013_20000101T000000_20991231T235959_20230614T000000_v102.sqlitexref_reforbittrack_files :SWOT_RefOrbitTrackTileBoundary_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txtxref_param_l2_hr_laketile_file :SWOT_Param_L2_HR_LakeTile_20000101T000000_20991231T235959_20230614T170000_v410.cfgellipsoid_semi_major_axis :6378137.0ellipsoid_flattening :0.0033528106647474805\n\n\n\n\n\n\npixcvec_htvals = ds_PIXCVEC.height_vectorproc.compute()\npixcvec_latvals = ds_PIXCVEC.latitude_vectorproc.compute()\npixcvec_lonvals = ds_PIXCVEC.longitude_vectorproc.compute()\n\n#Before plotting, we set all fill values to nan so that the graph shows up better spatially\npixcvec_htvals[pixcvec_htvals &gt; 15000] = np.nan\npixcvec_latvals[pixcvec_latvals &gt; 80] = np.nan\npixcvec_latvals[pixcvec_latvals &lt; -80] = np.nan\npixcvec_lonvals[pixcvec_lonvals &gt; 180] = np.nan\npixcvec_lonvals[pixcvec_lonvals &lt; -180] = np.nan\n\n\nplt.scatter(x=pixcvec_lonvals, y=pixcvec_latvals, c=pixcvec_htvals)\nplt.colorbar().set_label('Height (m)')\n\n\n\n\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\n#Say we know the exact cycle, pass & scene. We can search for one data granule!\nraster_results = earthaccess.search_data(short_name = 'SWOT_L2_HR_Raster_1.1', \n                                         temporal = ('2023-04-01 00:00:00', '2023-04-22 23:59:59'), \n                                         granule_name = '*100m*_498_013_130F*') # here we filter by files with '100m' in the name (This collection has two resolution options: 100m & 250m), cycle=498, pass=013, scene = 130F \n\nGranules found: 1\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=raster_results)\n\n# get link for file \nraster_link = earthaccess.results.DataGranule.data_links(raster_results[0], access='direct')[0]\n\ns3_file_obj5 = fs_s3.open(raster_link, mode='rb')\n\n\n\n\n\nds_raster = xr.open_dataset(s3_file_obj5, engine='h5netcdf')\nds_raster\n\n/srv/conda/envs/notebook/lib/python3.10/site-packages/xarray/coding/times.py:254: RuntimeWarning: invalid value encountered in cast\n  flat_num_dates_ns_int = (flat_num_dates * _NS_PER_TIME_DELTA[delta]).astype(\n/srv/conda/envs/notebook/lib/python3.10/site-packages/xarray/coding/times.py:254: RuntimeWarning: invalid value encountered in cast\n  flat_num_dates_ns_int = (flat_num_dates * _NS_PER_TIME_DELTA[delta]).astype(\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:                  (x: 1652, y: 1651)\nCoordinates:\n  * x                        (x) float64 5.438e+05 5.439e+05 ... 7.089e+05\n  * y                        (y) float64 6.468e+06 6.468e+06 ... 6.633e+06\nData variables: (12/39)\n    crs                      object ...\n    longitude                (y, x) float64 ...\n    latitude                 (y, x) float64 ...\n    wse                      (y, x) float32 ...\n    wse_qual                 (y, x) float32 ...\n    wse_qual_bitwise         (y, x) float64 ...\n    ...                       ...\n    load_tide_fes            (y, x) float32 ...\n    load_tide_got            (y, x) float32 ...\n    pole_tide                (y, x) float32 ...\n    model_dry_tropo_cor      (y, x) float32 ...\n    model_wet_tropo_cor      (y, x) float32 ...\n    iono_cor_gim_ka          (y, x) float32 ...\nAttributes: (12/49)\n    Conventions:                   CF-1.7\n    title:                         Level 2 KaRIn High Rate Raster Data Product\n    source:                        Ka-band radar interferometer\n    history:                       2023-09-13T20:22:58Z : Creation\n    platform:                      SWOT\n    reference_document:            JPL D-56416 - Revision B - October 24, 2022\n    ...                            ...\n    x_max:                         708900.0\n    y_min:                         6467900.0\n    y_max:                         6632900.0\n    institution:                   JPL\n    references:                    V1.0\n    product_version:               01xarray.DatasetDimensions:x: 1652y: 1651Coordinates: (2)x(x)float645.438e+05 5.439e+05 ... 7.089e+05long_name :x coordinate of projectionstandard_name :projection_x_coordinateunits :mvalid_min :-10000000.0valid_max :10000000.0comment :UTM easting coordinate of the pixel.array([543800., 543900., 544000., ..., 708700., 708800., 708900.])y(y)float646.468e+06 6.468e+06 ... 6.633e+06long_name :y coordinate of projectionstandard_name :projection_y_coordinateunits :mvalid_min :-20000000.0valid_max :20000000.0comment :UTM northing coordinate of the pixel.array([6467900., 6468000., 6468100., ..., 6632700., 6632800., 6632900.])Data variables: (39)crs()object...long_name :CRS Definitiongrid_mapping_name :transverse_mercatorprojected_crs_name :WGS 84 / UTM zone 11Ngeographic_crs_name :WGS 84reference_ellipsoid_name :WGS 84horizontal_datum_name :WGS_1984prime_meridian_name :Greenwichfalse_easting :500000.0false_northing :0.0longitude_of_central_meridian :-117.0longitude_of_prime_meridian :0.0latitude_of_projection_origin :0.0scale_factor_at_central_meridian :0.9996semi_major_axis :6378137.0inverse_flattening :298.257223563crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]comment :UTM zone coordinate reference system.[1 values with dtype=object]longitude(y, x)float64...long_name :longitude (degrees East)standard_name :longitudegrid_mapping :crsunits :degrees_eastvalid_min :-180.0valid_max :180.0comment :Geodetic longitude [-180,180) (east of the Greenwich meridian) of the pixel.[2727452 values with dtype=float64]latitude(y, x)float64...long_name :latitude (positive N, negative S)standard_name :latitudegrid_mapping :crsunits :degrees_northvalid_min :-80.0valid_max :80.0comment :Geodetic latitude [-80,80] (degrees north of equator) of the pixel.[2727452 values with dtype=float64]wse(y, x)float32...long_name :water surface elevation above geoidgrid_mapping :crsunits :mquality_flag :wse_qualvalid_min :-1500.0valid_max :15000.0comment :Water surface elevation of the pixel above the geoid and after using models to subtract the effects of tides (solid_earth_tide, load_tide_fes, pole_tide).[2727452 values with dtype=float32]wse_qual(y, x)float32...long_name :summary quality indicator for the water surface elevationstandard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the water surface elevation quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]wse_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the water surface elevationstandard_name :status_flaggrid_mapping :crsflag_meanings :classification_qual_suspect geolocation_qual_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         2          4         32        128       4096       8192\n      16384     262144     524288   16777216  268435456  536870912\n 1073741824 2147483648]valid_min :0valid_max :4044124326comment :Bitwise quality indicator for the water surface elevation quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]wse_uncert(y, x)float32...long_name :uncertainty in the water surface elevationgrid_mapping :crsunits :mvalid_min :0.0valid_max :999999.0comment :1-sigma uncertainty in the water surface elevation.[2727452 values with dtype=float32]water_area(y, x)float32...long_name :water surface areagrid_mapping :crsunits :m^2quality_flag :water_area_qualvalid_min :-2000000.0valid_max :2000000000.0comment :Surface area of the water pixels.[2727452 values with dtype=float32]water_area_qual(y, x)float32...long_name :summary quality indicator for the water surface areastandard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the water surface area and water fraction quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]water_area_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the water surface areastandard_name :status_flaggrid_mapping :crsflag_meanings :classification_qual_suspect geolocation_qual_suspect water_fraction_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         2          4          8         32        128       4096\n       8192      16384     262144     524288   16777216  268435456\n  536870912 1073741824 2147483648]valid_min :0valid_max :4044124334comment :Bitwise quality indicator for the water surface area and water fraction quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]water_area_uncert(y, x)float32...long_name :uncertainty in the water surface areagrid_mapping :crsunits :m^2valid_min :0.0valid_max :2000000000.0comment :1-sigma uncertainty in the water surface area.[2727452 values with dtype=float32]water_frac(y, x)float32...long_name :water fractiongrid_mapping :crsunits :1quality_flag :water_area_qualvalid_min :-1000.0valid_max :10000.0comment :Fraction of the pixel that is water.[2727452 values with dtype=float32]water_frac_uncert(y, x)float32...long_name :uncertainty in the water fractiongrid_mapping :crsunits :1valid_min :0.0valid_max :999999.0comment :1-sigma uncertainty in the water fraction.[2727452 values with dtype=float32]sig0(y, x)float32...long_name :sigma0grid_mapping :crsunits :1quality_flag :sig0_qualvalid_min :-1000.0valid_max :10000000.0comment :Normalized radar cross section (sigma0) in real, linear units (not decibels). The value may be negative due to noise subtraction.[2727452 values with dtype=float32]sig0_qual(y, x)float32...long_name :summary quality indicator for the sigma0standard_name :status_flaggrid_mapping :crsflag_meanings :good suspect degraded badflag_values :[0 1 2 3]valid_min :0valid_max :3comment :Summary quality indicator for the sigma0 quantities. A value of 0 indicates a nominal measurement, 1 indicates a suspect measurement, 2 indicates a degraded measurement, and 3 indicates a bad measurement.[2727452 values with dtype=float32]sig0_qual_bitwise(y, x)float64...long_name :bitwise quality indicator for the sigma0standard_name :status_flaggrid_mapping :crsflag_meanings :sig0_qual_suspect classification_qual_suspect geolocation_qual_suspect large_uncert_suspect bright_land few_pixels far_range_suspect near_range_suspect sig0_qual_degraded classification_qual_degraded geolocation_qual_degraded value_bad no_pixels outside_scene_bounds inner_swath missing_karin_dataflag_masks :[         1          2          4         32        128       4096\n       8192      16384     131072     262144     524288   16777216\n  268435456  536870912 1073741824 2147483648]valid_min :0valid_max :4044255399comment :Bitwise quality indicator for the sigma0 quantities. If this word is interpreted as an unsigned integer, a value of 0 indicates good data, positive values less than 32768 represent suspect data, values greater than or equal to 32768 but less than 8388608 represent degraded data, and values greater than or equal to 8388608 represent bad data.[2727452 values with dtype=float64]sig0_uncert(y, x)float32...long_name :uncertainty in sigma0grid_mapping :crsunits :1valid_min :0.0valid_max :1000.0comment :1-sigma uncertainty in sigma0. The value is provided in linear units. This value is a one-sigma additive (not multiplicative) uncertainty term, which can be added to or subtracted from sigma0.[2727452 values with dtype=float32]inc(y, x)float32...long_name :incidence anglegrid_mapping :crsunits :degreesvalid_min :0.0valid_max :90.0comment :Incidence angle.[2727452 values with dtype=float32]cross_track(y, x)float32...long_name :approximate cross-track locationgrid_mapping :crsunits :mvalid_min :-75000.0valid_max :75000.0comment :Approximate cross-track location of the pixel.[2727452 values with dtype=float32]illumination_time(y, x)datetime64[ns]...long_name :time of illumination of each pixel (UTC)standard_name :timetai_utc_difference :37.0leap_second :0000-00-00T00:00:00Zcomment :Time of measurement in seconds in the UTC time scale since 1 Jan 2000 00:00:00 UTC. [tai_utc_difference] is the difference between TAI and UTC reference time (seconds) for the first measurement of the data set. If a leap second occurs within the data set, the attribute leap_second is set to the UTC time at which the leap second occurs.[2727452 values with dtype=datetime64[ns]]illumination_time_tai(y, x)datetime64[ns]...long_name :time of illumination of each pixel (TAI)standard_name :timecomment :Time of measurement in seconds in the TAI time scale since 1 Jan 2000 00:00:00 TAI. This time scale contains no leap seconds. The difference (in seconds) with time in UTC is given by the attribute [illumination_time:tai_utc_difference].[2727452 values with dtype=datetime64[ns]]n_wse_pix(y, x)float64...long_name :number of water surface elevation pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in water surface elevation aggregation.[2727452 values with dtype=float64]n_water_area_pix(y, x)float64...long_name :number of water surface area pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in water surface area and water fraction aggregation.[2727452 values with dtype=float64]n_sig0_pix(y, x)float64...long_name :number of sigma0 pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in sigma0 aggregation.[2727452 values with dtype=float64]n_other_pix(y, x)float64...long_name :number of other pixelsgrid_mapping :crsunits :lvalid_min :0valid_max :999999comment :Number of pixel cloud samples used in aggregation of quantities not related to water surface elevation, water surface area, water fraction or sigma0.[2727452 values with dtype=float64]dark_frac(y, x)float32...long_name :fractional area of dark watergrid_mapping :crsunits :lvalid_min :-1000.0valid_max :10000.0comment :Fraction of pixel water surface area covered by dark water.[2727452 values with dtype=float32]ice_clim_flag(y, x)float32...long_name :climatological ice cover flagstandard_name :status_flagsource :UNCgrid_mapping :crsflag_meanings :no_ice_cover uncertain_ice_cover full_ice_coverflag_values :[0 1 2]valid_min :0valid_max :2comment :Climatological ice cover flag indicating whether the pixel is ice-covered on the day of the observation based on external climatological information (not the SWOT measurement). Values of 0, 1, and 2 indicate that the pixel is likely not ice covered, may or may not be partially or fully ice covered, and likely fully ice covered, respectively.[2727452 values with dtype=float32]ice_dyn_flag(y, x)float32...long_name :dynamic ice cover flagstandard_name :status_flagsource :UNCgrid_mapping :crsflag_meanings :no_ice_cover partial_ice_cover full_ice_coverflag_values :[0 1 2]valid_min :0valid_max :2comment :Dynamic ice cover flag indicating whether the surface is ice-covered on the day of the observation based on analysis of external satellite optical data.  Values of 0, 1, and 2 indicate that the pixel is not ice covered, partially ice covered, and fully ice covered, respectively.[2727452 values with dtype=float32]layover_impact(y, x)float32...long_name :layover impactgrid_mapping :crsunits :mvalid_min :-999999.0valid_max :999999.0comment :Estimate of the water surface elevation error caused by layover.[2727452 values with dtype=float32]sig0_cor_atmos_model(y, x)float32...long_name :two-way atmospheric correction to sigma0 from modelsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :1valid_min :1.0valid_max :10.0comment :Atmospheric correction to sigma0 from weather model data as a linear power multiplier (not decibels). sig0_cor_atmos_model is already applied in computing sig0.[2727452 values with dtype=float32]height_cor_xover(y, x)float32...long_name :height correction from KaRIn crossoversgrid_mapping :crsunits :mvalid_min :-10.0valid_max :10.0comment :Height correction from KaRIn crossover calibration. The correction is applied before geolocation but reported as an equivalent height correction.[2727452 values with dtype=float32]geoid(y, x)float32...long_name :geoid heightstandard_name :geoid_height_above_reference_ellipsoidsource :EGM2008 (Pavlis et al., 2012)grid_mapping :crsunits :mvalid_min :-150.0valid_max :150.0comment :Geoid height above the reference ellipsoid with a correction to refer the value to the mean tide system, i.e. includes the permanent tide (zero frequency).[2727452 values with dtype=float32]solid_earth_tide(y, x)float32...long_name :solid Earth tide heightsource :Cartwright and Taylor (1971) and Cartwright and Edden (1973)grid_mapping :crsunits :mvalid_min :-1.0valid_max :1.0comment :Solid-Earth (body) tide height. The zero-frequency permanent tide component is not included.[2727452 values with dtype=float32]load_tide_fes(y, x)float32...long_name :geocentric load tide height (FES)source :FES2014b (Carrere et al., 2016)institution :LEGOS/CNESgrid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth’s crust.[2727452 values with dtype=float32]load_tide_got(y, x)float32...long_name :geocentric load tide height (GOT)source :GOT4.10c (Ray, 2013)institution :GSFCgrid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric load tide height. The effect of the ocean tide loading of the Earth’s crust. This value is reported for reference but is not applied to the reported height.[2727452 values with dtype=float32]pole_tide(y, x)float32...long_name :geocentric pole tide heightsource :Wahr (1985) and Desai et al. (2015)grid_mapping :crsunits :mvalid_min :-0.2valid_max :0.2comment :Geocentric pole tide height. The total of the contribution from the solid-Earth (body) pole tide height and the load pole tide height (i.e., the effect of the ocean pole tide loading of the Earth’s crust).[2727452 values with dtype=float32]model_dry_tropo_cor(y, x)float32...long_name :dry troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :mvalid_min :-3.0valid_max :-1.5comment :Equivalent vertical correction due to dry troposphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]model_wet_tropo_cor(y, x)float32...long_name :wet troposphere vertical correctionsource :European Centre for Medium-Range Weather Forecastsinstitution :ECMWFgrid_mapping :crsunits :mvalid_min :-1.0valid_max :0.0comment :Equivalent vertical correction due to wet troposphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]iono_cor_gim_ka(y, x)float32...long_name :ionosphere vertical correctionsource :Global Ionosphere Mapsinstitution :JPLgrid_mapping :crsunits :mvalid_min :-0.5valid_max :0.0comment :Equivalent vertical correction due to ionosphere delay. The reported water surface elevation, latitude and longitude are computed after adding negative media corrections to uncorrected range along slant-range paths, accounting for the differential delay between the two KaRIn antennas. The equivalent vertical correction is computed by applying obliquity factors to the slant-path correction. Adding the reported correction to the reported water surface elevation results in the uncorrected pixel height.[2727452 values with dtype=float32]Indexes: (2)xPandasIndexPandasIndex(Float64Index([543800.0, 543900.0, 544000.0, 544100.0, 544200.0, 544300.0,\n              544400.0, 544500.0, 544600.0, 544700.0,\n              ...\n              708000.0, 708100.0, 708200.0, 708300.0, 708400.0, 708500.0,\n              708600.0, 708700.0, 708800.0, 708900.0],\n             dtype='float64', name='x', length=1652))yPandasIndexPandasIndex(Float64Index([6467900.0, 6468000.0, 6468100.0, 6468200.0, 6468300.0, 6468400.0,\n              6468500.0, 6468600.0, 6468700.0, 6468800.0,\n              ...\n              6632000.0, 6632100.0, 6632200.0, 6632300.0, 6632400.0, 6632500.0,\n              6632600.0, 6632700.0, 6632800.0, 6632900.0],\n             dtype='float64', name='y', length=1651))Attributes: (49)Conventions :CF-1.7title :Level 2 KaRIn High Rate Raster Data Productsource :Ka-band radar interferometerhistory :2023-09-13T20:22:58Z : Creationplatform :SWOTreference_document :JPL D-56416 - Revision B - October 24, 2022contact :alexander.t.corben[at]jpl.nasa.govcycle_number :498pass_number :13scene_number :130tile_numbers :[258 259 260 261 258 259 260 261]tile_names :013_258L, 013_259L, 013_260L, 013_261L, 013_258R, 013_259R, 013_260R, 013_261Rtile_polarizations :H, H, H, H, V, V, V, Vcoordinate_reference_system :Universal Transverse Mercatorresolution :100.0short_name :L2_HR_Rasterdescriptor_string :100m_UTM11V_N_x_x_xcrid :PIB0pge_name :PGE_L2_HR_RASTERpge_version :4.3.1time_granule_start :2023-04-22T05:13:10.260709Ztime_granule_end :2023-04-22T05:13:31.241801Ztime_coverage_start :2023-04-22T05:13:10.800929Ztime_coverage_end :2023-04-22T05:13:30.702796Zgeospatial_lon_min :-116.24217879897503geospatial_lon_max :-113.32307884940133geospatial_lat_min :58.3213119877029geospatial_lat_max :59.82415217044179left_first_longitude :-116.24217879897503left_first_latitude :58.75581670990796left_last_longitude :-115.40805937157408left_last_latitude :59.82415217044179right_first_longitude :-114.20750262227017right_first_latitude :58.3213119877029right_last_longitude :-113.32307884940133right_last_latitude :59.37343181849022xref_l2_hr_pixc_files :SWOT_L2_HR_PIXC_498_013_258L_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_259L_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_260L_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_261L_20230422T051330_20230422T051341_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_258R_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_259R_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_260R_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXC_498_013_261R_20230422T051330_20230422T051341_PIB0_01.ncxref_l2_hr_pixcvec_files :SWOT_L2_HR_PIXCVec_498_013_258L_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_259L_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_260L_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_261L_20230422T051330_20230422T051341_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_258R_20230422T051300_20230422T051311_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_259R_20230422T051310_20230422T051321_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_260R_20230422T051320_20230422T051331_PIB0_01.nc, SWOT_L2_HR_PIXCVec_498_013_261R_20230422T051330_20230422T051341_PIB0_01.ncxref_param_l2_hr_raster_file :SWOT_Param_L2_HR_Raster_20000101T000000_21000101T000000_20230321T100000_v301.rdfxref_reforbittrack_files :SWOT_RefOrbitTrackTileBoundary_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txt, SWOT_RefOrbitTrack125mPass1_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txt, SWOT_RefOrbitTrack125mPass2_Cal_20000101T000000_21000101T000000_20200617T193054_v101.txtutm_zone_num :11mgrs_latitude_band :Vx_min :543800.0x_max :708900.0y_min :6467900.0y_max :6632900.0institution :JPLreferences :V1.0product_version :01\n\n\n\n\n\n\nds_raster.wse.hvplot.image(y='y', x='x')\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nFor additional tips on spatial searching of SWOT HR L2 data, see also PO.DAAC Cookbook - SWOT Chapter tips section.\n\nslc_results = earthaccess.search_data(short_name = 'SWOT_L1B_HR_SLC_1.1',\n                                       temporal = ('2023-04-22 00:00:00', '2023-04-22 23:59:59'), \n                                       granule_name = '*_498_013_*') # here we filter by cycle=498 and pass=013 with wildcards\n\nGranules found: 164\n\n\n\n\n\ns3fs sessions are used for authenticated access to s3 bucket and allows for typical file-system style operations. Below we create session by passing in the data access information.\n\nfs_s3 = earthaccess.get_s3fs_session(results=slc_results)\n\n# get link for file \nslc_link = earthaccess.results.DataGranule.data_links(slc_results[0], access='direct')[0]\n\ns3_file_obj6 = fs_s3.open(slc_link, mode='rb')\n\n\n\n\nThe L1B_HR_SLC product file contains five NetCDF data group called the slc, xfactor, noise, tvp, and grdem groups. More info can be found in the product description document within the dataset table for each group.\n\nds_SLC = xr.open_dataset(s3_file_obj6, group = 'slc', engine='h5netcdf')\nds_SLC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:      (num_lines: 17954, num_pixels: 4630, complex_depth: 2)\nDimensions without coordinates: num_lines, num_pixels, complex_depth\nData variables:\n    slc_plus_y   (num_lines, num_pixels, complex_depth) float32 ...\n    slc_minus_y  (num_lines, num_pixels, complex_depth) float32 ...\n    slc_qual     (num_lines) float32 ...\nAttributes:\n    description:  Single look complex images for plus_y and minus_y channelsxarray.DatasetDimensions:num_lines: 17954num_pixels: 4630complex_depth: 2Coordinates: (0)Data variables: (3)slc_plus_y(num_lines, num_pixels, complex_depth)float32...long_name :single look complex image for the plus_y channelunits :1valid_min :-1e+20valid_max :1e+20comment :SLC complex image for the plus_y channel (arbitrary scaling consistent with the X factor).[166254040 values with dtype=float32]slc_minus_y(num_lines, num_pixels, complex_depth)float32...long_name :single look complex image for the minus_y channelunits :1valid_min :-1e+20valid_max :1e+20comment :SLC complex image for the minus_y channel (arbitrary scaling consistent with the X factor).[166254040 values with dtype=float32]slc_qual(num_lines)float32...long_name :SLC quality flagstandard_name :status_flagflag_meanings :tvp_suspect sc_event_suspect small_karin_gap tvp_bad sc_event_bad large_karin_gapflag_masks :[  1   2   4  32  64 128]valid_min :0valid_max :231comment :Flag indicating conditions that may affect the quality of the SLC data.[17954 values with dtype=float32]Indexes: (0)Attributes: (1)description :Single look complex images for plus_y and minus_y channels"
  }
]